var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.11',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $parent=$(elem)['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10);},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));(function(window,undefined){'use strict';var Hammer=function Hammer(element,options){return new Hammer.Instance(element,options||{});};Hammer.VERSION='1.1.3';Hammer.defaults={behavior:{userSelect:'none',touchAction:'manipulation',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};Hammer.DOCUMENT=document;Hammer.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;Hammer.HAS_TOUCHEVENTS=('ontouchstart'in window);Hammer.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);var match=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase());Hammer.IS_IE_7=match&&(match[1]==='msie')&&(match[2]==='7.0');Hammer.IS_IE_8=match&&(match[1]==='msie')&&(match[2]==='8.0');Hammer.MOUSE_DOWN_BUTTON_CODE=Hammer.IS_IE_8||Hammer.IS_IE_7?1:0;Hammer.NO_MOUSEEVENTS=(Hammer.HAS_TOUCHEVENTS&&Hammer.IS_MOBILE)||Hammer.HAS_POINTEREVENTS;Hammer.CALCULATE_INTERVAL=25;var EVENT_TYPES={};var DIRECTION_DOWN=Hammer.DIRECTION_DOWN='down';var DIRECTION_LEFT=Hammer.DIRECTION_LEFT='left';var DIRECTION_UP=Hammer.DIRECTION_UP='up';var DIRECTION_RIGHT=Hammer.DIRECTION_RIGHT='right';var POINTER_MOUSE=Hammer.POINTER_MOUSE='mouse';var POINTER_TOUCH=Hammer.POINTER_TOUCH='touch';var POINTER_PEN=Hammer.POINTER_PEN='pen';var EVENT_START=Hammer.EVENT_START='start';var EVENT_MOVE=Hammer.EVENT_MOVE='move';var EVENT_END=Hammer.EVENT_END='end';var EVENT_RELEASE=Hammer.EVENT_RELEASE='release';var EVENT_TOUCH=Hammer.EVENT_TOUCH='touch';Hammer.READY=false;Hammer.plugins=Hammer.plugins||{};Hammer.gestures=Hammer.gestures||{};function setup(){if(Hammer.READY){return;}
Event.determineEventTypes();Utils.each(Hammer.gestures,function(gesture){Detection.register(gesture);});Event.onTouch(Hammer.DOCUMENT,EVENT_MOVE,Detection.detect);Event.onTouch(Hammer.DOCUMENT,EVENT_END,Detection.detect);Hammer.READY=true;}
var Utils=Hammer.utils={extend:function extend(dest,src,merge){for(var key in src){if(!src.hasOwnProperty(key)||(dest[key]!==undefined&&merge)){continue;}
dest[key]=src[key];}
return dest;},on:function on(element,type,handler){element.addEventListener(type,handler,false);},off:function off(element,type,handler){element.removeEventListener(type,handler,false);},each:function each(obj,iterator,context){var i,len;if('forEach'in obj){obj.forEach(iterator,context);}else if(obj.length!==undefined){for(i=0,len=obj.length;i<len;i++){if(iterator.call(context,obj[i],i,obj)===false){return;}}}else{for(i in obj){if(obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)===false){return;}}}},inStr:function inStr(src,find){return src.indexOf(find)>-1;},inArray:function inArray(src,find){if(src.indexOf){var index=src.indexOf(find);return(index===-1)?false:index;}else{for(var i=0,len=src.length;i<len;i++){if(src[i]===find){return i;}}
return false;}},toArray:function toArray(obj){return Array.prototype.slice.call(obj,0);},hasParent:function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;},getCenter:function getCenter(touches){var pageX=[],pageY=[],clientX=[],clientY=[],min=Math.min,max=Math.max;if(touches.length===1){return{pageX:touches[0].pageX,pageY:touches[0].pageY,clientX:touches[0].clientX,clientY:touches[0].clientY};}
Utils.each(touches,function(touch){pageX.push(touch.pageX);pageY.push(touch.pageY);clientX.push(touch.clientX);clientY.push(touch.clientY);});return{pageX:(min.apply(Math,pageX)+max.apply(Math,pageX))/2,pageY:(min.apply(Math,pageY)+max.apply(Math,pageY))/2,clientX:(min.apply(Math,clientX)+max.apply(Math,clientX))/2,clientY:(min.apply(Math,clientY)+max.apply(Math,clientY))/2};},getVelocity:function getVelocity(deltaTime,deltaX,deltaY){return{x:Math.abs(deltaX/deltaTime)||0,y:Math.abs(deltaY/deltaTime)||0};},getAngle:function getAngle(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.atan2(y,x)*180/Math.PI;},getDirection:function getDirection(touch1,touch2){var x=Math.abs(touch1.clientX-touch2.clientX),y=Math.abs(touch1.clientY-touch2.clientY);if(x>=y){return touch1.clientX-touch2.clientX>0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return touch1.clientY-touch2.clientY>0?DIRECTION_UP:DIRECTION_DOWN;},getDistance:function getDistance(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.sqrt((x*x)+(y*y));},getScale:function getScale(start,end){if(start.length>=2&&end.length>=2){return this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]);}
return 1;},getRotation:function getRotation(start,end){if(start.length>=2&&end.length>=2){return this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]);}
return 0;},isVertical:function isVertical(direction){return direction==DIRECTION_UP||direction==DIRECTION_DOWN;},setPrefixedCss:function setPrefixedCss(element,prop,value,toggle){var prefixes=['','Webkit','Moz','O','ms'];prop=Utils.toCamelCase(prop);for(var i=0;i<prefixes.length;i++){var p=prop;if(prefixes[i]){p=prefixes[i]+p.slice(0,1).toUpperCase()+p.slice(1);}
if(p in element.style){element.style[p]=(toggle==null||toggle)&&value||'';break;}}},toggleBehavior:function toggleBehavior(element,props,toggle){if(!props||!element||!element.style){return;}
Utils.each(props,function(value,prop){Utils.setPrefixedCss(element,prop,value,toggle);});var falseFn=toggle&&function(){return false;};if(props.userSelect=='none'){element.onselectstart=falseFn;}
if(props.userDrag=='none'){element.ondragstart=falseFn;}},toCamelCase:function toCamelCase(str){return str.replace(/[_-]([a-z])/g,function(s){return s[1].toUpperCase();});}};Hammer.Instance=function(element,options){var self=this;setup();this.element=element;this.enabled=true;Utils.each(options,function(value,name){delete options[name];options[Utils.toCamelCase(name)]=value;});this.options=Utils.extend(Utils.extend({},Hammer.defaults),options||{});if(this.options.behavior){Utils.toggleBehavior(this.element,this.options.behavior,true);}
this.eventStartHandler=Event.onTouch(element,EVENT_START,function(ev){if(self.enabled&&ev.eventType==EVENT_START){Detection.startDetect(self,ev);}else if(ev.eventType==EVENT_TOUCH){Detection.detect(ev);}});this.eventHandlers=[];};Hammer.Instance.prototype={on:function onEvent(gestures,handler){var self=this;Event.on(self.element,gestures,handler,function(type){self.eventHandlers.push({gesture:type,handler:handler});});return self;},off:function offEvent(gestures,handler){var self=this;Event.off(self.element,gestures,handler,function(type){var index=Utils.inArray({gesture:type,handler:handler});if(index!==false){self.eventHandlers.splice(index,1);}});return self;},trigger:function triggerEvent(gesture,eventData){if(!eventData){eventData={};}
var event=Hammer.DOCUMENT.createEvent('Event');event.initEvent(gesture,true,true);event.gesture=eventData;var element=this.element;if(Utils.hasParent(eventData.target,element)){element=eventData.target;}
element.dispatchEvent(event);return this;},enable:function enable(state){this.enabled=state;return this;},dispose:function dispose(){var i,eh;Utils.toggleBehavior(this.element,this.options.behavior,false);for(i=-1;(eh=this.eventHandlers[++i]);){Utils.off(this.element,eh.gesture,eh.handler);}
this.eventHandlers=[];Event.off(this.element,EVENT_TYPES[EVENT_START],this.eventStartHandler);return null;}};var Event=Hammer.event={preventMouseEvents:false,started:false,shouldDetect:false,on:function on(element,type,handler,hook){var types=type.split(' ');Utils.each(types,function(type){Utils.on(element,type,handler);hook&&hook(type);});},off:function off(element,type,handler,hook){var types=type.split(' ');Utils.each(types,function(type){Utils.off(element,type,handler);hook&&hook(type);});},onTouch:function onTouch(element,eventType,handler){var self=this;var onTouchHandler=function onTouchHandler(ev){var srcType=ev.type.toLowerCase(),isPointer=Hammer.HAS_POINTEREVENTS,isMouse=Utils.inStr(srcType,'mouse'),triggerType;if(isMouse&&self.preventMouseEvents){return;}else if(isMouse&&eventType==EVENT_START&&ev.button===Hammer.MOUSE_DOWN_BUTTON_CODE){self.preventMouseEvents=false;self.shouldDetect=true;}else if(isPointer&&eventType==EVENT_START){self.shouldDetect=(ev.buttons===1||PointerEvent.matchType(POINTER_TOUCH,ev));}else if(!isMouse&&eventType==EVENT_START){self.preventMouseEvents=true;self.shouldDetect=true;}
if(isPointer&&eventType!=EVENT_END){PointerEvent.updatePointer(eventType,ev);}
if(self.shouldDetect){triggerType=self.doDetect.call(self,ev,eventType,element,handler);}
if(triggerType==EVENT_END){self.preventMouseEvents=false;self.shouldDetect=false;PointerEvent.reset();}
if(isPointer&&eventType==EVENT_END){PointerEvent.updatePointer(eventType,ev);}};this.on(element,EVENT_TYPES[eventType],onTouchHandler);return onTouchHandler;},doDetect:function doDetect(ev,eventType,element,handler){var touchList=this.getTouchList(ev,eventType);var touchListLength=touchList.length;var triggerType=eventType;var triggerChange=touchList.trigger;var changedLength=touchListLength;if(eventType==EVENT_START){triggerChange=EVENT_TOUCH;}else if(eventType==EVENT_END){triggerChange=EVENT_RELEASE;changedLength=touchList.length-((ev.changedTouches)?ev.changedTouches.length:1);}
if(changedLength>0&&this.started){triggerType=EVENT_MOVE;}
this.started=true;var evData=this.collectEventData(element,triggerType,touchList,ev);if(eventType!=EVENT_END){handler.call(Detection,evData);}
if(triggerChange){evData.changedLength=changedLength;evData.eventType=triggerChange;handler.call(Detection,evData);evData.eventType=triggerType;delete evData.changedLength;}
if(triggerType==EVENT_END){handler.call(Detection,evData);this.started=false;}
return triggerType;},determineEventTypes:function determineEventTypes(){var types;if(Hammer.HAS_POINTEREVENTS){if(window.PointerEvent){types=['pointerdown','pointermove','pointerup pointercancel lostpointercapture'];}else{types=['MSPointerDown','MSPointerMove','MSPointerUp MSPointerCancel MSLostPointerCapture'];}}else if(Hammer.NO_MOUSEEVENTS){types=['touchstart','touchmove','touchend touchcancel'];}else{types=['touchstart mousedown','touchmove mousemove','touchend touchcancel mouseup'];}
EVENT_TYPES[EVENT_START]=types[0];EVENT_TYPES[EVENT_MOVE]=types[1];EVENT_TYPES[EVENT_END]=types[2];return EVENT_TYPES;},getTouchList:function getTouchList(ev,eventType){if(Hammer.HAS_POINTEREVENTS){return PointerEvent.getTouchList();}
if(ev.touches){if(eventType==EVENT_MOVE){return ev.touches;}
var identifiers=[];var concat=[].concat(Utils.toArray(ev.touches),Utils.toArray(ev.changedTouches));var touchList=[];Utils.each(concat,function(touch){if(Utils.inArray(identifiers,touch.identifier)===false){touchList.push(touch);}
identifiers.push(touch.identifier);});return touchList;}
ev.identifier=1;return[ev];},collectEventData:function collectEventData(element,eventType,touches,ev){var pointerType=POINTER_TOUCH;if(Utils.inStr(ev.type,'mouse')||PointerEvent.matchType(POINTER_MOUSE,ev)){pointerType=POINTER_MOUSE;}else if(PointerEvent.matchType(POINTER_PEN,ev)){pointerType=POINTER_PEN;}
return{center:Utils.getCenter(touches),timeStamp:Date.now(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){var srcEvent=this.srcEvent;srcEvent.preventManipulation&&srcEvent.preventManipulation();srcEvent.preventDefault&&srcEvent.preventDefault();},stopPropagation:function(){this.srcEvent.stopPropagation();},stopDetect:function(){return Detection.stopDetect();}};}};var PointerEvent=Hammer.PointerEvent={pointers:{},getTouchList:function getTouchList(){var touchlist=[];Utils.each(this.pointers,function(pointer){touchlist.push(pointer);});return touchlist;},updatePointer:function updatePointer(eventType,pointerEvent){if(eventType==EVENT_END||(eventType!=EVENT_END&&pointerEvent.buttons!==1)){delete this.pointers[pointerEvent.pointerId];}else{pointerEvent.identifier=pointerEvent.pointerId;this.pointers[pointerEvent.pointerId]=pointerEvent;}},matchType:function matchType(pointerType,ev){if(!ev.pointerType){return false;}
var pt=ev.pointerType,types={};types[POINTER_MOUSE]=(pt===(ev.MSPOINTER_TYPE_MOUSE||POINTER_MOUSE));types[POINTER_TOUCH]=(pt===(ev.MSPOINTER_TYPE_TOUCH||POINTER_TOUCH));types[POINTER_PEN]=(pt===(ev.MSPOINTER_TYPE_PEN||POINTER_PEN));return types[pointerType];},reset:function resetList(){this.pointers={};}};var Detection=Hammer.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function startDetect(inst,eventData){if(this.current){return;}
this.stopped=false;this.current={inst:inst,startEvent:Utils.extend({},eventData),lastEvent:false,lastCalcEvent:false,futureCalcEvent:false,lastCalcData:{},name:''};this.detect(eventData);},detect:function detect(eventData){if(!this.current||this.stopped){return;}
eventData=this.extendEventData(eventData);var inst=this.current.inst,instOptions=inst.options;Utils.each(this.gestures,function triggerGesture(gesture){if(!this.stopped&&inst.enabled&&instOptions[gesture.name]){gesture.handler.call(gesture,eventData,inst);}},this);if(this.current){this.current.lastEvent=eventData;}
if(eventData.eventType==EVENT_END){this.stopDetect();}
return eventData;},stopDetect:function stopDetect(){this.previous=Utils.extend({},this.current);this.current=null;this.stopped=true;},getCalculatedData:function getCalculatedData(ev,center,deltaTime,deltaX,deltaY){var cur=this.current,recalc=false,calcEv=cur.lastCalcEvent,calcData=cur.lastCalcData;if(calcEv&&ev.timeStamp-calcEv.timeStamp>Hammer.CALCULATE_INTERVAL){center=calcEv.center;deltaTime=ev.timeStamp-calcEv.timeStamp;deltaX=ev.center.clientX-calcEv.center.clientX;deltaY=ev.center.clientY-calcEv.center.clientY;recalc=true;}
if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){cur.futureCalcEvent=ev;}
if(!cur.lastCalcEvent||recalc){calcData.velocity=Utils.getVelocity(deltaTime,deltaX,deltaY);calcData.angle=Utils.getAngle(center,ev.center);calcData.direction=Utils.getDirection(center,ev.center);cur.lastCalcEvent=cur.futureCalcEvent||ev;cur.futureCalcEvent=ev;}
ev.velocityX=calcData.velocity.x;ev.velocityY=calcData.velocity.y;ev.interimAngle=calcData.angle;ev.interimDirection=calcData.direction;},extendEventData:function extendEventData(ev){var cur=this.current,startEv=cur.startEvent,lastEv=cur.lastEvent||startEv;if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){startEv.touches=[];Utils.each(ev.touches,function(touch){startEv.touches.push({clientX:touch.clientX,clientY:touch.clientY});});}
var deltaTime=ev.timeStamp-startEv.timeStamp,deltaX=ev.center.clientX-startEv.center.clientX,deltaY=ev.center.clientY-startEv.center.clientY;this.getCalculatedData(ev,lastEv.center,deltaTime,deltaX,deltaY);Utils.extend(ev,{startEvent:startEv,deltaTime:deltaTime,deltaX:deltaX,deltaY:deltaY,distance:Utils.getDistance(startEv.center,ev.center),angle:Utils.getAngle(startEv.center,ev.center),direction:Utils.getDirection(startEv.center,ev.center),scale:Utils.getScale(startEv.touches,ev.touches),rotation:Utils.getRotation(startEv.touches,ev.touches)});return ev;},register:function register(gesture){var options=gesture.defaults||{};if(options[gesture.name]===undefined){options[gesture.name]=true;}
Utils.extend(Hammer.defaults,options,true);gesture.index=gesture.index||1000;this.gestures.push(gesture);this.gestures.sort(function(a,b){if(a.index<b.index){return-1;}
if(a.index>b.index){return 1;}
return 0;});return this.gestures;}};(function(name){var triggered=false;function dragGesture(ev,inst){var cur=Detection.current;if(inst.options.dragMaxTouches>0&&ev.touches.length>inst.options.dragMaxTouches){return;}
switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.distance<inst.options.dragMinDistance&&cur.name!=name){return;}
var startCenter=cur.startEvent.center;if(cur.name!=name){cur.name=name;if(inst.options.dragDistanceCorrection&&ev.distance>0){var factor=Math.abs(inst.options.dragMinDistance/ev.distance);startCenter.pageX+=ev.deltaX*factor;startCenter.pageY+=ev.deltaY*factor;startCenter.clientX+=ev.deltaX*factor;startCenter.clientY+=ev.deltaY*factor;ev=Detection.extendEventData(ev);}}
if(cur.lastEvent.dragLockToAxis||(inst.options.dragLockToAxis&&inst.options.dragLockMinDistance<=ev.distance)){ev.dragLockToAxis=true;}
var lastDirection=cur.lastEvent.direction;if(ev.dragLockToAxis&&lastDirection!==ev.direction){if(Utils.isVertical(lastDirection)){ev.direction=(ev.deltaY<0)?DIRECTION_UP:DIRECTION_DOWN;}else{ev.direction=(ev.deltaX<0)?DIRECTION_LEFT:DIRECTION_RIGHT;}}
if(!triggered){inst.trigger(name+'start',ev);triggered=true;}
inst.trigger(name,ev);inst.trigger(name+ev.direction,ev);var isVertical=Utils.isVertical(ev.direction);if((inst.options.dragBlockVertical&&isVertical)||(inst.options.dragBlockHorizontal&&!isVertical)){ev.preventDefault();}
break;case EVENT_RELEASE:if(triggered&&ev.changedLength<=inst.options.dragMaxTouches){inst.trigger(name+'end',ev);triggered=false;}
break;case EVENT_END:triggered=false;break;}}
Hammer.gestures.Drag={name:name,index:50,handler:dragGesture,defaults:{dragMinDistance:10,dragDistanceCorrection:true,dragMaxTouches:1,dragBlockHorizontal:false,dragBlockVertical:false,dragLockToAxis:false,dragLockMinDistance:25}};})('drag');Hammer.gestures.Gesture={name:'gesture',index:1337,handler:function releaseGesture(ev,inst){inst.trigger(this.name,ev);}};(function(name){var timer;function holdGesture(ev,inst){var options=inst.options,current=Detection.current;switch(ev.eventType){case EVENT_START:clearTimeout(timer);current.name=name;timer=setTimeout(function(){if(current&&current.name==name){inst.trigger(name,ev);}},options.holdTimeout);break;case EVENT_MOVE:if(ev.distance>options.holdThreshold){clearTimeout(timer);}
break;case EVENT_RELEASE:clearTimeout(timer);break;}}
Hammer.gestures.Hold={name:name,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:holdGesture};})('hold');Hammer.gestures.Release={name:'release',index:Infinity,handler:function releaseGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){inst.trigger(this.name,ev);}}};Hammer.gestures.Swipe={name:'swipe',index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:0.6,swipeVelocityY:0.6},handler:function swipeGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){var touches=ev.touches.length,options=inst.options;if(touches<options.swipeMinTouches||touches>options.swipeMaxTouches){return;}
if(ev.velocityX>options.swipeVelocityX||ev.velocityY>options.swipeVelocityY){inst.trigger(this.name,ev);inst.trigger(this.name+ev.direction,ev);}}}};(function(name){var hasMoved=false;function tapGesture(ev,inst){var options=inst.options,current=Detection.current,prev=Detection.previous,sincePrev,didDoubleTap;switch(ev.eventType){case EVENT_START:hasMoved=false;break;case EVENT_MOVE:hasMoved=hasMoved||(ev.distance>options.tapMaxDistance);break;case EVENT_END:if(!Utils.inStr(ev.srcEvent.type,'cancel')&&ev.deltaTime<options.tapMaxTime&&!hasMoved){sincePrev=prev&&prev.lastEvent&&ev.timeStamp-prev.lastEvent.timeStamp;didDoubleTap=false;if(prev&&prev.name==name&&(sincePrev&&sincePrev<options.doubleTapInterval)&&ev.distance<options.doubleTapDistance){inst.trigger('doubletap',ev);didDoubleTap=true;}
if(!didDoubleTap||options.tapAlways){current.name=name;inst.trigger(current.name,ev);}}
break;}}
Hammer.gestures.Tap={name:name,index:100,handler:tapGesture,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:true,doubleTapDistance:20,doubleTapInterval:300}};})('tap');Hammer.gestures.Touch={name:'touch',index:-Infinity,defaults:{preventDefault:false,preventMouse:false},handler:function touchGesture(ev,inst){if(inst.options.preventMouse&&ev.pointerType==POINTER_MOUSE){ev.stopDetect();return;}
if(inst.options.preventDefault){ev.preventDefault();}
if(ev.eventType==EVENT_TOUCH){inst.trigger('touch',ev);}}};(function(name){var triggered=false;function transformGesture(ev,inst){switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.touches.length<2){return;}
var scaleThreshold=Math.abs(1-ev.scale);var rotationThreshold=Math.abs(ev.rotation);if(scaleThreshold<inst.options.transformMinScale&&rotationThreshold<inst.options.transformMinRotation){return;}
Detection.current.name=name;if(!triggered){inst.trigger(name+'start',ev);triggered=true;}
inst.trigger(name,ev);if(rotationThreshold>inst.options.transformMinRotation){inst.trigger('rotate',ev);}
if(scaleThreshold>inst.options.transformMinScale){inst.trigger('pinch',ev);inst.trigger('pinch'+(ev.scale<1?'in':'out'),ev);}
break;case EVENT_RELEASE:if(triggered&&ev.changedLength<2){inst.trigger(name+'end',ev);triggered=false;}
break;}}
Hammer.gestures.Transform={name:name,index:45,defaults:{transformMinScale:0.01,transformMinRotation:1},handler:transformGesture};})('transform');window.Hammer=Hammer;if(typeof module!=='undefined'&&module.exports){module.exports=Hammer;}
function setupPlugin(Hammer,$){if(!Date.now){Date.now=function now(){return new Date().getTime();};}
Hammer.utils.each(['on','off'],function(method){Hammer.utils[method]=function(element,type,handler){$(element)[method](type,function($ev){var data=$.extend({},$ev.originalEvent,$ev);if(data.button===undefined){data.button=$ev.which-1;}
handler.call(this,data);});};});Hammer.Instance.prototype.trigger=function(gesture,eventData){var el=$(this.element);if(el.has(eventData.target).length){el=$(eventData.target);}
return el.trigger({type:gesture,gesture:eventData});};$.fn.hammer=function(options){return this.each(function(){var el=$(this);var inst=el.data('hammer');if(!inst){el.data('hammer',new Hammer(this,options||{}));}else if(inst&&options){Hammer.utils.extend(inst.options,options);}});};}
if(typeof define=='function'&&define.amd){define(['jquery'],function($){return setupPlugin(window.Hammer,$);});}else{setupPlugin(window.Hammer,window.jQuery||window.Zepto);}})(window);;window.Modernizr=function(a,b,c){function B(a){j.cssText=a}function C(a,b){return B(m.join(a+";")+(b||""))}function D(a,b){return typeof a===b}function E(a,b){return!!~(""+a).indexOf(b)}function F(a,b){for(var d in a){var e=a[d];if(!E(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function G(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:D(f,"function")?f.bind(d||b):f}return!1}function H(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return D(b,"string")||D(b,"undefined")?F(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),G(e,b,c))}var d="2.8.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b)&&c(b).matches||!1;var d;return w("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},y=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=D(e[d],"function"),D(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),z={}.hasOwnProperty,A;!D(z,"undefined")&&!D(z.call,"undefined")?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&D(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},q.csstransforms=function(){return!!H("transform")},q.csstransforms3d=function(){var a=!!H("perspective");return a&&"webkitPerspective"in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},q.csstransitions=function(){return H("transition")},q.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},q.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c};for(var I in q)A(q,I)&&(v=I.toLowerCase(),e[v]=q[I](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)A(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},B(""),i=k=null,e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.mq=x,e.hasEvent=y,e.testProp=function(a){return F([a])},e.testAllProps=H,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),Modernizr.addTest("csspositionsticky",function(){var a="position:",b="sticky",c=document.createElement("modernizr"),d=c.style;return d.cssText=a+Modernizr._prefixes.join(b+";"+a).slice(0,-a.length),d.position.indexOf(b)!==-1});(function($){var methods={init:function(options){var defaults={set_width:false,set_height:false,horizontalScroll:false,scrollInertia:950,mouseWheel:true,mouseWheelPixels:"auto",autoDraggerLength:true,autoHideScrollbar:false,snapAmount:null,snapOffset:0,scrollButtons:{enable:false,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:true,updateOnContentResize:false,autoExpandHorizontalScroll:false,autoScrollOnFocus:true,normalizeMouseWheelDelta:false},contentTouchScroll:true,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},options=$.extend(true,defaults,options);return this.each(function(){var $this=$(this);if(options.set_width){$this.css("width",options.set_width);}
if(options.set_height){$this.css("height",options.set_height);}
if(!$(document).data("mCustomScrollbar-index")){$(document).data("mCustomScrollbar-index","1");}else{var mCustomScrollbarIndex=parseInt($(document).data("mCustomScrollbar-index"));$(document).data("mCustomScrollbar-index",mCustomScrollbarIndex+1);}
$this.wrapInner("<div class='mCustomScrollBox"+" mCS-"+options.theme+"' id='mCSB_"+$(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+$(document).data("mCustomScrollbar-index"));var mCustomScrollBox=$this.children(".mCustomScrollBox");if(options.horizontalScroll){mCustomScrollBox.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var mCSB_h_wrapper=mCustomScrollBox.children(".mCSB_h_wrapper");mCSB_h_wrapper.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({"width":mCSB_h_wrapper.children().outerWidth(),"position":"relative"}).unwrap();}else{mCustomScrollBox.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");}
var mCSB_container=mCustomScrollBox.children(".mCSB_container");if($.support.touch){mCSB_container.addClass("mCS_touch");}
mCSB_container.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var mCSB_scrollTools=mCustomScrollBox.children(".mCSB_scrollTools"),mCSB_draggerContainer=mCSB_scrollTools.children(".mCSB_draggerContainer"),mCSB_dragger=mCSB_draggerContainer.children(".mCSB_dragger");if(options.horizontalScroll){mCSB_dragger.data("minDraggerWidth",mCSB_dragger.width());}else{mCSB_dragger.data("minDraggerHeight",mCSB_dragger.height());}
if(options.scrollButtons.enable){if(options.horizontalScroll){mCSB_scrollTools.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>");}else{mCSB_scrollTools.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>");}}
mCustomScrollBox.bind("scroll",function(){if(!$this.is(".mCS_disabled")){mCustomScrollBox.scrollTop(0).scrollLeft(0);}});$this.data({"mCS_Init":true,"mCustomScrollbarIndex":$(document).data("mCustomScrollbar-index"),"horizontalScroll":options.horizontalScroll,"scrollInertia":options.scrollInertia,"scrollEasing":"mcsEaseOut","mouseWheel":options.mouseWheel,"mouseWheelPixels":options.mouseWheelPixels,"autoDraggerLength":options.autoDraggerLength,"autoHideScrollbar":options.autoHideScrollbar,"snapAmount":options.snapAmount,"snapOffset":options.snapOffset,"scrollButtons_enable":options.scrollButtons.enable,"scrollButtons_scrollType":options.scrollButtons.scrollType,"scrollButtons_scrollSpeed":options.scrollButtons.scrollSpeed,"scrollButtons_scrollAmount":options.scrollButtons.scrollAmount,"autoExpandHorizontalScroll":options.advanced.autoExpandHorizontalScroll,"autoScrollOnFocus":options.advanced.autoScrollOnFocus,"normalizeMouseWheelDelta":options.advanced.normalizeMouseWheelDelta,"contentTouchScroll":options.contentTouchScroll,"onScrollStart_Callback":options.callbacks.onScrollStart,"onScroll_Callback":options.callbacks.onScroll,"onTotalScroll_Callback":options.callbacks.onTotalScroll,"onTotalScrollBack_Callback":options.callbacks.onTotalScrollBack,"onTotalScroll_Offset":options.callbacks.onTotalScrollOffset,"onTotalScrollBack_Offset":options.callbacks.onTotalScrollBackOffset,"whileScrolling_Callback":options.callbacks.whileScrolling,"bindEvent_scrollbar_drag":false,"bindEvent_content_touch":false,"bindEvent_scrollbar_click":false,"bindEvent_mousewheel":false,"bindEvent_buttonsContinuous_y":false,"bindEvent_buttonsContinuous_x":false,"bindEvent_buttonsPixels_y":false,"bindEvent_buttonsPixels_x":false,"bindEvent_focusin":false,"bindEvent_autoHideScrollbar":false,"mCSB_buttonScrollRight":false,"mCSB_buttonScrollLeft":false,"mCSB_buttonScrollDown":false,"mCSB_buttonScrollUp":false});if(options.horizontalScroll){if($this.css("max-width")!=="none"){if(!options.advanced.updateOnContentResize){options.advanced.updateOnContentResize=true;}}}else{if($this.css("max-height")!=="none"){var percentage=false,maxHeight=parseInt($this.css("max-height"));if($this.css("max-height").indexOf("%")>=0){percentage=maxHeight,maxHeight=$this.parent().height()*percentage/100;}
$this.css("overflow","hidden");mCustomScrollBox.css("max-height",maxHeight);}}
$this.mCustomScrollbar("update");if(options.advanced.updateOnBrowserResize){var mCSB_resizeTimeout,currWinWidth=$(window).width(),currWinHeight=$(window).height();$(window).bind("resize."+$this.data("mCustomScrollbarIndex"),function(){if(mCSB_resizeTimeout){clearTimeout(mCSB_resizeTimeout);}
mCSB_resizeTimeout=setTimeout(function(){if(!$this.is(".mCS_disabled")&&!$this.is(".mCS_destroyed")){var winWidth=$(window).width(),winHeight=$(window).height();if(currWinWidth!==winWidth||currWinHeight!==winHeight){if($this.css("max-height")!=="none"&&percentage){mCustomScrollBox.css("max-height",$this.parent().height()*percentage/100);}
$this.mCustomScrollbar("update");currWinWidth=winWidth;currWinHeight=winHeight;}}},150);});}
if(options.advanced.updateOnContentResize){var mCSB_onContentResize;if(options.horizontalScroll){var mCSB_containerOldSize=mCSB_container.outerWidth();}else{var mCSB_containerOldSize=mCSB_container.outerHeight();}
mCSB_onContentResize=setInterval(function(){if(options.horizontalScroll){if(options.advanced.autoExpandHorizontalScroll){mCSB_container.css({"position":"absolute","width":"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({"width":mCSB_container.outerWidth(),"position":"relative"}).unwrap();}
var mCSB_containerNewSize=mCSB_container.outerWidth();}else{var mCSB_containerNewSize=mCSB_container.outerHeight();}
if(mCSB_containerNewSize!=mCSB_containerOldSize){$this.mCustomScrollbar("update");mCSB_containerOldSize=mCSB_containerNewSize;}},300);}});},update:function(){var $this=$(this),mCustomScrollBox=$this.children(".mCustomScrollBox"),mCSB_container=mCustomScrollBox.children(".mCSB_container");mCSB_container.removeClass("mCS_no_scrollbar");$this.removeClass("mCS_disabled mCS_destroyed");mCustomScrollBox.scrollTop(0).scrollLeft(0);var mCSB_scrollTools=mCustomScrollBox.children(".mCSB_scrollTools"),mCSB_draggerContainer=mCSB_scrollTools.children(".mCSB_draggerContainer"),mCSB_dragger=mCSB_draggerContainer.children(".mCSB_dragger");if($this.data("horizontalScroll")){var mCSB_buttonLeft=mCSB_scrollTools.children(".mCSB_buttonLeft"),mCSB_buttonRight=mCSB_scrollTools.children(".mCSB_buttonRight"),mCustomScrollBoxW=mCustomScrollBox.width();if($this.data("autoExpandHorizontalScroll")){mCSB_container.css({"position":"absolute","width":"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({"width":mCSB_container.outerWidth(),"position":"relative"}).unwrap();}
var mCSB_containerW=mCSB_container.outerWidth();}else{var mCSB_buttonUp=mCSB_scrollTools.children(".mCSB_buttonUp"),mCSB_buttonDown=mCSB_scrollTools.children(".mCSB_buttonDown"),mCustomScrollBoxH=mCustomScrollBox.height(),mCSB_containerH=mCSB_container.outerHeight();}
if(mCSB_containerH>mCustomScrollBoxH&&!$this.data("horizontalScroll")){mCSB_scrollTools.css("display","block");var mCSB_draggerContainerH=mCSB_draggerContainer.height();if($this.data("autoDraggerLength")){var draggerH=Math.round(mCustomScrollBoxH/mCSB_containerH*mCSB_draggerContainerH),minDraggerH=mCSB_dragger.data("minDraggerHeight");if(draggerH<=minDraggerH){mCSB_dragger.css({"height":minDraggerH});}else if(draggerH>=mCSB_draggerContainerH-10){var mCSB_draggerContainerMaxH=mCSB_draggerContainerH-10;mCSB_dragger.css({"height":mCSB_draggerContainerMaxH});}else{mCSB_dragger.css({"height":draggerH});}
mCSB_dragger.children(".mCSB_dragger_bar").css({"line-height":mCSB_dragger.height()+"px"});}
var mCSB_draggerH=mCSB_dragger.height(),scrollAmount=(mCSB_containerH-mCustomScrollBoxH)/(mCSB_draggerContainerH-mCSB_draggerH);$this.data("scrollAmount",scrollAmount).mCustomScrollbar("scrolling",mCustomScrollBox,mCSB_container,mCSB_draggerContainer,mCSB_dragger,mCSB_buttonUp,mCSB_buttonDown,mCSB_buttonLeft,mCSB_buttonRight);var mCSB_containerP=Math.abs(mCSB_container.position().top);$this.mCustomScrollbar("scrollTo",mCSB_containerP,{scrollInertia:0,trigger:"internal"});}else if(mCSB_containerW>mCustomScrollBoxW&&$this.data("horizontalScroll")){mCSB_scrollTools.css("display","block");var mCSB_draggerContainerW=mCSB_draggerContainer.width();if($this.data("autoDraggerLength")){var draggerW=Math.round(mCustomScrollBoxW/mCSB_containerW*mCSB_draggerContainerW),minDraggerW=mCSB_dragger.data("minDraggerWidth");if(draggerW<=minDraggerW){mCSB_dragger.css({"width":minDraggerW});}else if(draggerW>=mCSB_draggerContainerW-10){var mCSB_draggerContainerMaxW=mCSB_draggerContainerW-10;mCSB_dragger.css({"width":mCSB_draggerContainerMaxW});}else{mCSB_dragger.css({"width":draggerW});}}
var mCSB_draggerW=mCSB_dragger.width(),scrollAmount=(mCSB_containerW-mCustomScrollBoxW)/(mCSB_draggerContainerW-mCSB_draggerW);$this.data("scrollAmount",scrollAmount).mCustomScrollbar("scrolling",mCustomScrollBox,mCSB_container,mCSB_draggerContainer,mCSB_dragger,mCSB_buttonUp,mCSB_buttonDown,mCSB_buttonLeft,mCSB_buttonRight);var mCSB_containerP=Math.abs(mCSB_container.position().left);$this.mCustomScrollbar("scrollTo",mCSB_containerP,{scrollInertia:0,trigger:"internal"});}else{mCustomScrollBox.unbind("mousewheel focusin");if($this.data("horizontalScroll")){mCSB_dragger.add(mCSB_container).css("left",0);}else{mCSB_dragger.add(mCSB_container).css("top",0);}
mCSB_scrollTools.css("display","none");mCSB_container.addClass("mCS_no_scrollbar");$this.data({"bindEvent_mousewheel":false,"bindEvent_focusin":false});}},scrolling:function(mCustomScrollBox,mCSB_container,mCSB_draggerContainer,mCSB_dragger,mCSB_buttonUp,mCSB_buttonDown,mCSB_buttonLeft,mCSB_buttonRight){var $this=$(this);if(!$this.data("bindEvent_scrollbar_drag")){var mCSB_draggerDragY,mCSB_draggerDragX;if($.support.msPointer){mCSB_dragger.bind("MSPointerDown",function(e){e.preventDefault();$this.data({"on_drag":true});mCSB_dragger.addClass("mCSB_dragger_onDrag");var elem=$(this),elemOffset=elem.offset(),x=e.originalEvent.pageX-elemOffset.left,y=e.originalEvent.pageY-elemOffset.top;if(x<elem.width()&&x>0&&y<elem.height()&&y>0){mCSB_draggerDragY=y;mCSB_draggerDragX=x;}});$(document).bind("MSPointerMove."+$this.data("mCustomScrollbarIndex"),function(e){e.preventDefault();if($this.data("on_drag")){var elem=mCSB_dragger,elemOffset=elem.offset(),x=e.originalEvent.pageX-elemOffset.left,y=e.originalEvent.pageY-elemOffset.top;scrollbarDrag(mCSB_draggerDragY,mCSB_draggerDragX,y,x);}}).bind("MSPointerUp."+$this.data("mCustomScrollbarIndex"),function(e){$this.data({"on_drag":false});mCSB_dragger.removeClass("mCSB_dragger_onDrag");});}else{mCSB_dragger.bind("mousedown touchstart",function(e){e.preventDefault();e.stopImmediatePropagation();var elem=$(this),elemOffset=elem.offset(),x,y;if(e.type==="touchstart"){var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];x=touch.pageX-elemOffset.left;y=touch.pageY-elemOffset.top;}else{$this.data({"on_drag":true});mCSB_dragger.addClass("mCSB_dragger_onDrag");x=e.pageX-elemOffset.left;y=e.pageY-elemOffset.top;}
if(x<elem.width()&&x>0&&y<elem.height()&&y>0){mCSB_draggerDragY=y;mCSB_draggerDragX=x;}}).bind("touchmove",function(e){e.preventDefault();e.stopImmediatePropagation();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],elem=$(this),elemOffset=elem.offset(),x=touch.pageX-elemOffset.left,y=touch.pageY-elemOffset.top;scrollbarDrag(mCSB_draggerDragY,mCSB_draggerDragX,y,x);});$(document).bind("mousemove."+$this.data("mCustomScrollbarIndex"),function(e){if($this.data("on_drag")){var elem=mCSB_dragger,elemOffset=elem.offset(),x=e.pageX-elemOffset.left,y=e.pageY-elemOffset.top;scrollbarDrag(mCSB_draggerDragY,mCSB_draggerDragX,y,x);}}).bind("mouseup."+$this.data("mCustomScrollbarIndex"),function(e){$this.data({"on_drag":false});mCSB_dragger.removeClass("mCSB_dragger_onDrag");});}
$this.data({"bindEvent_scrollbar_drag":true});}
function scrollbarDrag(mCSB_draggerDragY,mCSB_draggerDragX,y,x){if($this.data("horizontalScroll")){$this.mCustomScrollbar("scrollTo",(mCSB_dragger.position().left-(mCSB_draggerDragX))+x,{moveDragger:true,trigger:"internal"});}else{$this.mCustomScrollbar("scrollTo",(mCSB_dragger.position().top-(mCSB_draggerDragY))+y,{moveDragger:true,trigger:"internal"});}}
if($.support.touch&&$this.data("contentTouchScroll")){if(!$this.data("bindEvent_content_touch")){var touch,elem,elemOffset,y,x,mCSB_containerTouchY,mCSB_containerTouchX;mCSB_container.bind("touchstart",function(e){e.stopImmediatePropagation();touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];elem=$(this);elemOffset=elem.offset();x=touch.pageX-elemOffset.left;y=touch.pageY-elemOffset.top;mCSB_containerTouchY=y;mCSB_containerTouchX=x;});mCSB_container.bind("touchmove",function(e){e.preventDefault();e.stopImmediatePropagation();touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];elem=$(this).parent();elemOffset=elem.offset();x=touch.pageX-elemOffset.left;y=touch.pageY-elemOffset.top;if($this.data("horizontalScroll")){$this.mCustomScrollbar("scrollTo",mCSB_containerTouchX-x,{trigger:"internal"});}else{$this.mCustomScrollbar("scrollTo",mCSB_containerTouchY-y,{trigger:"internal"});}});}}
if(!$this.data("bindEvent_scrollbar_click")){mCSB_draggerContainer.bind("click",function(e){var scrollToPos=(e.pageY-mCSB_draggerContainer.offset().top)*$this.data("scrollAmount"),target=$(e.target);if($this.data("horizontalScroll")){scrollToPos=(e.pageX-mCSB_draggerContainer.offset().left)*$this.data("scrollAmount");}
if(target.hasClass("mCSB_draggerContainer")||target.hasClass("mCSB_draggerRail")){$this.mCustomScrollbar("scrollTo",scrollToPos,{trigger:"internal",scrollEasing:"draggerRailEase"});}});$this.data({"bindEvent_scrollbar_click":true});}
if($this.data("mouseWheel")){if(!$this.data("bindEvent_mousewheel")){mCustomScrollBox.bind("mousewheel",function(e,delta){var scrollTo,mouseWheelPixels=$this.data("mouseWheelPixels"),absPos=Math.abs(mCSB_container.position().top),draggerPos=mCSB_dragger.position().top,limit=mCSB_draggerContainer.height()-mCSB_dragger.height();if($this.data("normalizeMouseWheelDelta")){if(delta<0){delta=-1;}else{delta=1;}}
if(mouseWheelPixels==="auto"){mouseWheelPixels=100+Math.round($this.data("scrollAmount")/2);}
if($this.data("horizontalScroll")){draggerPos=mCSB_dragger.position().left;limit=mCSB_draggerContainer.width()-mCSB_dragger.width();absPos=Math.abs(mCSB_container.position().left);}
if((delta>0&&draggerPos!==0)||(delta<0&&draggerPos!==limit)){e.preventDefault();e.stopImmediatePropagation();}
scrollTo=absPos-(delta*mouseWheelPixels);$this.mCustomScrollbar("scrollTo",scrollTo,{trigger:"internal"});});$this.data({"bindEvent_mousewheel":true});}}
if($this.data("scrollButtons_enable")){if($this.data("scrollButtons_scrollType")==="pixels"){if($this.data("horizontalScroll")){mCSB_buttonRight.add(mCSB_buttonLeft).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",mCSB_buttonRight_stop,mCSB_buttonLeft_stop);$this.data({"bindEvent_buttonsContinuous_x":false});if(!$this.data("bindEvent_buttonsPixels_x")){mCSB_buttonRight.bind("click",function(e){e.preventDefault();PixelsScrollTo(Math.abs(mCSB_container.position().left)+$this.data("scrollButtons_scrollAmount"));});mCSB_buttonLeft.bind("click",function(e){e.preventDefault();PixelsScrollTo(Math.abs(mCSB_container.position().left)-$this.data("scrollButtons_scrollAmount"));});$this.data({"bindEvent_buttonsPixels_x":true});}}else{mCSB_buttonDown.add(mCSB_buttonUp).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",mCSB_buttonRight_stop,mCSB_buttonLeft_stop);$this.data({"bindEvent_buttonsContinuous_y":false});if(!$this.data("bindEvent_buttonsPixels_y")){mCSB_buttonDown.bind("click",function(e){e.preventDefault();PixelsScrollTo(Math.abs(mCSB_container.position().top)+$this.data("scrollButtons_scrollAmount"));});mCSB_buttonUp.bind("click",function(e){e.preventDefault();PixelsScrollTo(Math.abs(mCSB_container.position().top)-$this.data("scrollButtons_scrollAmount"));});$this.data({"bindEvent_buttonsPixels_y":true});}}
function PixelsScrollTo(to){if(!mCSB_dragger.data("preventAction")){mCSB_dragger.data("preventAction",true);$this.mCustomScrollbar("scrollTo",to,{trigger:"internal"});}}}else{if($this.data("horizontalScroll")){mCSB_buttonRight.add(mCSB_buttonLeft).unbind("click");$this.data({"bindEvent_buttonsPixels_x":false});if(!$this.data("bindEvent_buttonsContinuous_x")){mCSB_buttonRight.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var scrollButtonsSpeed=ScrollButtonsSpeed();$this.data({"mCSB_buttonScrollRight":setInterval(function(){$this.mCustomScrollbar("scrollTo",Math.abs(mCSB_container.position().left)+scrollButtonsSpeed,{trigger:"internal",scrollEasing:"easeOutCirc"});},17)});});var mCSB_buttonRight_stop=function(e){e.preventDefault();clearInterval($this.data("mCSB_buttonScrollRight"));}
mCSB_buttonRight.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",mCSB_buttonRight_stop);mCSB_buttonLeft.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var scrollButtonsSpeed=ScrollButtonsSpeed();$this.data({"mCSB_buttonScrollLeft":setInterval(function(){$this.mCustomScrollbar("scrollTo",Math.abs(mCSB_container.position().left)-scrollButtonsSpeed,{trigger:"internal",scrollEasing:"easeOutCirc"});},17)});});var mCSB_buttonLeft_stop=function(e){e.preventDefault();clearInterval($this.data("mCSB_buttonScrollLeft"));}
mCSB_buttonLeft.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",mCSB_buttonLeft_stop);$this.data({"bindEvent_buttonsContinuous_x":true});}}else{mCSB_buttonDown.add(mCSB_buttonUp).unbind("click");$this.data({"bindEvent_buttonsPixels_y":false});if(!$this.data("bindEvent_buttonsContinuous_y")){mCSB_buttonDown.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var scrollButtonsSpeed=ScrollButtonsSpeed();$this.data({"mCSB_buttonScrollDown":setInterval(function(){$this.mCustomScrollbar("scrollTo",Math.abs(mCSB_container.position().top)+scrollButtonsSpeed,{trigger:"internal",scrollEasing:"easeOutCirc"});},17)});});var mCSB_buttonDown_stop=function(e){e.preventDefault();clearInterval($this.data("mCSB_buttonScrollDown"));}
mCSB_buttonDown.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",mCSB_buttonDown_stop);mCSB_buttonUp.bind("mousedown touchstart MSPointerDown",function(e){e.preventDefault();var scrollButtonsSpeed=ScrollButtonsSpeed();$this.data({"mCSB_buttonScrollUp":setInterval(function(){$this.mCustomScrollbar("scrollTo",Math.abs(mCSB_container.position().top)-scrollButtonsSpeed,{trigger:"internal",scrollEasing:"easeOutCirc"});},17)});});var mCSB_buttonUp_stop=function(e){e.preventDefault();clearInterval($this.data("mCSB_buttonScrollUp"));}
mCSB_buttonUp.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",mCSB_buttonUp_stop);$this.data({"bindEvent_buttonsContinuous_y":true});}}
function ScrollButtonsSpeed(){var speed=$this.data("scrollButtons_scrollSpeed");if($this.data("scrollButtons_scrollSpeed")==="auto"){speed=Math.round(($this.data("scrollInertia")+100)/40);}
return speed;}}}
if($this.data("autoScrollOnFocus")){if(!$this.data("bindEvent_focusin")){mCustomScrollBox.bind("focusin",function(){mCustomScrollBox.scrollTop(0).scrollLeft(0);var focusedElem=$(document.activeElement);if(focusedElem.is("input,textarea,select,button,a[tabindex],area,object")){var mCSB_containerPos=mCSB_container.position().top,focusedElemPos=focusedElem.position().top,visibleLimit=mCustomScrollBox.height()-focusedElem.outerHeight();if($this.data("horizontalScroll")){mCSB_containerPos=mCSB_container.position().left;focusedElemPos=focusedElem.position().left;visibleLimit=mCustomScrollBox.width()-focusedElem.outerWidth();}
if(mCSB_containerPos+focusedElemPos<0||mCSB_containerPos+focusedElemPos>visibleLimit){$this.mCustomScrollbar("scrollTo",focusedElemPos,{trigger:"internal"});}}});$this.data({"bindEvent_focusin":true});}}
if($this.data("autoHideScrollbar")){if(!$this.data("bindEvent_autoHideScrollbar")){mCustomScrollBox.bind("mouseenter",function(e){mCustomScrollBox.addClass("mCS-mouse-over");functions.showScrollbar.call(mCustomScrollBox.children(".mCSB_scrollTools"));}).bind("mouseleave touchend",function(e){mCustomScrollBox.removeClass("mCS-mouse-over");if(e.type==="mouseleave"){functions.hideScrollbar.call(mCustomScrollBox.children(".mCSB_scrollTools"));}});$this.data({"bindEvent_autoHideScrollbar":true});}}},scrollTo:function(scrollTo,options){var $this=$(this),defaults={moveDragger:false,trigger:"external",callbacks:true,scrollInertia:$this.data("scrollInertia"),scrollEasing:$this.data("scrollEasing")},options=$.extend(defaults,options),draggerScrollTo,mCustomScrollBox=$this.children(".mCustomScrollBox"),mCSB_container=mCustomScrollBox.children(".mCSB_container"),mCSB_scrollTools=mCustomScrollBox.children(".mCSB_scrollTools"),mCSB_draggerContainer=mCSB_scrollTools.children(".mCSB_draggerContainer"),mCSB_dragger=mCSB_draggerContainer.children(".mCSB_dragger"),contentSpeed=draggerSpeed=options.scrollInertia,scrollBeginning,scrollBeginningOffset,totalScroll,totalScrollOffset;if(!mCSB_container.hasClass("mCS_no_scrollbar")){$this.data({"mCS_trigger":options.trigger});if($this.data("mCS_Init")){options.callbacks=false;}
if(scrollTo||scrollTo===0){if(typeof(scrollTo)==="number"){if(options.moveDragger){draggerScrollTo=scrollTo;if($this.data("horizontalScroll")){scrollTo=mCSB_dragger.position().left*$this.data("scrollAmount");}else{scrollTo=mCSB_dragger.position().top*$this.data("scrollAmount");}
draggerSpeed=0;}else{draggerScrollTo=scrollTo/$this.data("scrollAmount");}}else if(typeof(scrollTo)==="string"){var target;if(scrollTo==="top"){target=0;}else if(scrollTo==="bottom"&&!$this.data("horizontalScroll")){target=mCSB_container.outerHeight()-mCustomScrollBox.height();}else if(scrollTo==="left"){target=0;}else if(scrollTo==="right"&&$this.data("horizontalScroll")){target=mCSB_container.outerWidth()-mCustomScrollBox.width();}else if(scrollTo==="first"){target=$this.find(".mCSB_container").find(":first");}else if(scrollTo==="last"){target=$this.find(".mCSB_container").find(":last");}else{target=$this.find(scrollTo);}
if(target.length===1){if($this.data("horizontalScroll")){scrollTo=target.position().left;}else{scrollTo=target.position().top;}
draggerScrollTo=scrollTo/$this.data("scrollAmount");}else{draggerScrollTo=scrollTo=target;}}
if($this.data("horizontalScroll")){if($this.data("onTotalScrollBack_Offset")){scrollBeginningOffset=-$this.data("onTotalScrollBack_Offset");}
if($this.data("onTotalScroll_Offset")){totalScrollOffset=mCustomScrollBox.width()-mCSB_container.outerWidth()+$this.data("onTotalScroll_Offset");}
if(draggerScrollTo<0){draggerScrollTo=scrollTo=0;clearInterval($this.data("mCSB_buttonScrollLeft"));if(!scrollBeginningOffset){scrollBeginning=true;}}else if(draggerScrollTo>=mCSB_draggerContainer.width()-mCSB_dragger.width()){draggerScrollTo=mCSB_draggerContainer.width()-mCSB_dragger.width();scrollTo=mCustomScrollBox.width()-mCSB_container.outerWidth();clearInterval($this.data("mCSB_buttonScrollRight"));if(!totalScrollOffset){totalScroll=true;}}else{scrollTo=-scrollTo;}
var snapAmount=$this.data("snapAmount");if(snapAmount){scrollTo=Math.round(scrollTo/snapAmount)*snapAmount-$this.data("snapOffset");}
functions.mTweenAxis.call(this,mCSB_dragger[0],"left",Math.round(draggerScrollTo),draggerSpeed,options.scrollEasing);functions.mTweenAxis.call(this,mCSB_container[0],"left",Math.round(scrollTo),contentSpeed,options.scrollEasing,{onStart:function(){if(options.callbacks&&!$this.data("mCS_tweenRunning")){callbacks("onScrollStart");}
if($this.data("autoHideScrollbar")){functions.showScrollbar.call(mCSB_scrollTools);}},onUpdate:function(){if(options.callbacks){callbacks("whileScrolling");}},onComplete:function(){if(options.callbacks){callbacks("onScroll");if(scrollBeginning||(scrollBeginningOffset&&mCSB_container.position().left>=scrollBeginningOffset)){callbacks("onTotalScrollBack");}
if(totalScroll||(totalScrollOffset&&mCSB_container.position().left<=totalScrollOffset)){callbacks("onTotalScroll");}}
mCSB_dragger.data("preventAction",false);$this.data("mCS_tweenRunning",false);if($this.data("autoHideScrollbar")){if(!mCustomScrollBox.hasClass("mCS-mouse-over")){functions.hideScrollbar.call(mCSB_scrollTools);}}}});}else{if($this.data("onTotalScrollBack_Offset")){scrollBeginningOffset=-$this.data("onTotalScrollBack_Offset");}
if($this.data("onTotalScroll_Offset")){totalScrollOffset=mCustomScrollBox.height()-mCSB_container.outerHeight()+$this.data("onTotalScroll_Offset");}
if(draggerScrollTo<0){draggerScrollTo=scrollTo=0;clearInterval($this.data("mCSB_buttonScrollUp"));if(!scrollBeginningOffset){scrollBeginning=true;}}else if(draggerScrollTo>=mCSB_draggerContainer.height()-mCSB_dragger.height()){draggerScrollTo=mCSB_draggerContainer.height()-mCSB_dragger.height();scrollTo=mCustomScrollBox.height()-mCSB_container.outerHeight();clearInterval($this.data("mCSB_buttonScrollDown"));if(!totalScrollOffset){totalScroll=true;}}else{scrollTo=-scrollTo;}
var snapAmount=$this.data("snapAmount");if(snapAmount){scrollTo=Math.round(scrollTo/snapAmount)*snapAmount-$this.data("snapOffset");}
functions.mTweenAxis.call(this,mCSB_dragger[0],"top",Math.round(draggerScrollTo),draggerSpeed,options.scrollEasing);functions.mTweenAxis.call(this,mCSB_container[0],"top",Math.round(scrollTo),contentSpeed,options.scrollEasing,{onStart:function(){if(options.callbacks&&!$this.data("mCS_tweenRunning")){callbacks("onScrollStart");}
if($this.data("autoHideScrollbar")){functions.showScrollbar.call(mCSB_scrollTools);}},onUpdate:function(){if(options.callbacks){callbacks("whileScrolling");}},onComplete:function(){if(options.callbacks){callbacks("onScroll");if(scrollBeginning||(scrollBeginningOffset&&mCSB_container.position().top>=scrollBeginningOffset)){callbacks("onTotalScrollBack");}
if(totalScroll||(totalScrollOffset&&mCSB_container.position().top<=totalScrollOffset)){callbacks("onTotalScroll");}}
mCSB_dragger.data("preventAction",false);$this.data("mCS_tweenRunning",false);if($this.data("autoHideScrollbar")){if(!mCustomScrollBox.hasClass("mCS-mouse-over")){functions.hideScrollbar.call(mCSB_scrollTools);}}}});}
if($this.data("mCS_Init")){$this.data({"mCS_Init":false});}}}
function callbacks(cb){this.mcs={top:mCSB_container.position().top,left:mCSB_container.position().left,draggerTop:mCSB_dragger.position().top,draggerLeft:mCSB_dragger.position().left,topPct:Math.round((100*Math.abs(mCSB_container.position().top))/Math.abs(mCSB_container.outerHeight()-mCustomScrollBox.height())),leftPct:Math.round((100*Math.abs(mCSB_container.position().left))/Math.abs(mCSB_container.outerWidth()-mCustomScrollBox.width()))};switch(cb){case"onScrollStart":$this.data("mCS_tweenRunning",true).data("onScrollStart_Callback").call($this,this.mcs);break;case"whileScrolling":$this.data("whileScrolling_Callback").call($this,this.mcs);break;case"onScroll":$this.data("onScroll_Callback").call($this,this.mcs);break;case"onTotalScrollBack":$this.data("onTotalScrollBack_Callback").call($this,this.mcs);break;case"onTotalScroll":$this.data("onTotalScroll_Callback").call($this,this.mcs);break;}}},stop:function(){var $this=$(this),mCSB_container=$this.children().children(".mCSB_container"),mCSB_dragger=$this.children().children().children().children(".mCSB_dragger");functions.mTweenAxisStop.call(this,mCSB_container[0]);functions.mTweenAxisStop.call(this,mCSB_dragger[0]);},disable:function(resetScroll){var $this=$(this),mCustomScrollBox=$this.children(".mCustomScrollBox"),mCSB_container=mCustomScrollBox.children(".mCSB_container"),mCSB_scrollTools=mCustomScrollBox.children(".mCSB_scrollTools"),mCSB_dragger=mCSB_scrollTools.children().children(".mCSB_dragger");mCustomScrollBox.unbind("mousewheel focusin mouseenter mouseleave touchend");mCSB_container.unbind("touchstart touchmove")
if(resetScroll){if($this.data("horizontalScroll")){mCSB_dragger.add(mCSB_container).css("left",0);}else{mCSB_dragger.add(mCSB_container).css("top",0);}}
mCSB_scrollTools.css("display","none");mCSB_container.addClass("mCS_no_scrollbar");$this.data({"bindEvent_mousewheel":false,"bindEvent_focusin":false,"bindEvent_content_touch":false,"bindEvent_autoHideScrollbar":false}).addClass("mCS_disabled");},destroy:function(){var $this=$(this);$this.removeClass("mCustomScrollbar _mCS_"+$this.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove();$(document).unbind("mousemove."+$this.data("mCustomScrollbarIndex")+" mouseup."+$this.data("mCustomScrollbarIndex")+" MSPointerMove."+$this.data("mCustomScrollbarIndex")+" MSPointerUp."+$this.data("mCustomScrollbarIndex"));$(window).unbind("resize."+$this.data("mCustomScrollbarIndex"));}},functions={showScrollbar:function(){this.stop().animate({opacity:1},"fast");},hideScrollbar:function(){this.stop().animate({opacity:0},"fast");},mTweenAxis:function(el,prop,to,duration,easing,callbacks){var callbacks=callbacks||{},onStart=callbacks.onStart||function(){},onUpdate=callbacks.onUpdate||function(){},onComplete=callbacks.onComplete||function(){};var startTime=_getTime(),_delay,progress=0,from=el.offsetTop,elStyle=el.style;if(prop==="left"){from=el.offsetLeft;}
var diff=to-from;_cancelTween();_startTween();function _getTime(){if(window.performance&&window.performance.now){return window.performance.now();}else{if(window.performance&&window.performance.webkitNow){return window.performance.webkitNow();}else{if(Date.now){return Date.now();}else{return new Date().getTime();}}}}
function _step(){if(!progress){onStart.call();}
progress=_getTime()-startTime;_tween();if(progress>=el._time){el._time=(progress>el._time)?progress+_delay-(progress-el._time):progress+_delay-1;if(el._time<progress+1){el._time=progress+1;}}
if(el._time<duration){el._id=_request(_step);}else{onComplete.call();}}
function _tween(){if(duration>0){el.currVal=_ease(el._time,from,diff,duration,easing);elStyle[prop]=Math.round(el.currVal)+"px";}else{elStyle[prop]=to+"px";}
onUpdate.call();}
function _startTween(){_delay=1000/60;el._time=progress+_delay;_request=(!window.requestAnimationFrame)?function(f){_tween();return setTimeout(f,0.01);}:window.requestAnimationFrame;el._id=_request(_step);}
function _cancelTween(){if(el._id==null){return;}
if(!window.requestAnimationFrame){clearTimeout(el._id);}else{window.cancelAnimationFrame(el._id);}
el._id=null;}
function _ease(t,b,c,d,type){switch(type){case"linear":return c*t/d+b;break;case"easeOutQuad":t/=d;return-c*t*(t-2)+b;break;case"easeInOutQuad":t/=d/2;if(t<1)return c/2*t*t+b;t--;return-c/2*(t*(t-2)-1)+b;break;case"easeOutCubic":t/=d;t--;return c*(t*t*t+1)+b;break;case"easeOutQuart":t/=d;t--;return-c*(t*t*t*t-1)+b;break;case"easeOutQuint":t/=d;t--;return c*(t*t*t*t*t+1)+b;break;case"easeOutCirc":t/=d;t--;return c*Math.sqrt(1-t*t)+b;break;case"easeOutSine":return c*Math.sin(t/d*(Math.PI/2))+b;break;case"easeOutExpo":return c*(-Math.pow(2,-10*t/d)+1)+b;break;case"mcsEaseOut":var ts=(t/=d)*t,tc=ts*t;return b+c*(0.499999999999997*tc*ts+-2.5*ts*ts+5.5*tc+-6.5*ts+4*t);break;case"draggerRailEase":t/=d/2;if(t<1)return c/2*t*t*t+b;t-=2;return c/2*(t*t*t+2)+b;break;}}},mTweenAxisStop:function(el){if(el._id==null){return;}
if(!window.requestAnimationFrame){clearTimeout(el._id);}else{window.cancelAnimationFrame(el._id);}
el._id=null;},rafPolyfill:function(){var pfx=["ms","moz","webkit","o"],i=pfx.length;while(--i>-1&&!window.requestAnimationFrame){window.requestAnimationFrame=window[pfx[i]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[pfx[i]+"CancelAnimationFrame"]||window[pfx[i]+"CancelRequestAnimationFrame"];}}}
functions.rafPolyfill.call();$.support.touch=!!('ontouchstart'in window);$.support.msPointer=window.navigator.msPointerEnabled;if($.event.special.mousewheel===undefined){throw new Error(' You need to connect the mousewheel plugin (version >=3.0.6)');}
$.fn.mCustomScrollbar=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist");}};})(jQuery);LazyLoad=(function(doc){var env,head,pending={},pollCount=0,queue={css:[],js:[]},styleSheets=doc.styleSheets;function createNode(name,attrs){var node=doc.createElement(name),attr;for(attr in attrs){if(attrs.hasOwnProperty(attr)){node.setAttribute(attr,attrs[attr]);}}
return node;}
function finish(type){var p=pending[type],callback,urls;if(p){callback=p.callback;urls=p.urls;urls.shift();pollCount=0;if(!urls.length){callback&&callback.call(p.context,p.obj);pending[type]=null;queue[type].length&&load(type);}}}
function getEnv(){var ua=navigator.userAgent;env={async:doc.createElement('script').async===true};(env.webkit=/AppleWebKit\//.test(ua))||(env.ie=/MSIE/.test(ua))||(env.opera=/Opera/.test(ua))||(env.gecko=/Gecko\//.test(ua))||(env.unknown=true);}
var Browser={Version:function(){var version=999;if(navigator.appVersion.indexOf("MSIE")!=-1)
version=parseFloat(navigator.appVersion.split("MSIE")[1]);return version;}};function load(type,urls,callback,obj,context){var _finish=function(){finish(type);},isCSS=type==='css',nodes=[],i,len,node,p,pendingUrls,url;env||getEnv();if(urls){urls=typeof urls==='string'?[urls]:urls.concat();if(isCSS||env.async||env.gecko||env.opera){queue[type].push({urls:urls,callback:callback,obj:obj,context:context});}else{for(i=0,len=urls.length;i<len;++i){queue[type].push({urls:[urls[i]],callback:i===len-1?callback:null,obj:obj,context:context});}}}
if(pending[type]||!(p=pending[type]=queue[type].shift())){return;}
head||(head=doc.head||doc.getElementsByTagName('head')[0]);pendingUrls=p.urls;for(i=0,len=pendingUrls.length;i<len;++i){url=pendingUrls[i];if(isCSS){node=env.gecko?createNode('style'):createNode('link',{href:url,rel:'stylesheet'});}else{node=createNode('script',{src:url});node.async=false;}
node.className='lazyload';node.setAttribute('charset','utf-8');if(env.ie&&!isCSS&&Browser.Version()<10){node.onreadystatechange=function(){if(/loaded|complete/.test(node.readyState)){node.onreadystatechange=null;_finish();}};}else if(isCSS&&(env.gecko||env.webkit)){if(env.webkit){p.urls[i]=node.href;pollWebKit();}else{node.innerHTML='@import "'+url+'";';pollGecko(node);}}else{node.onload=node.onerror=_finish;}
nodes.push(node);}
for(i=0,len=nodes.length;i<len;++i){head.appendChild(nodes[i]);}}
function pollGecko(node){var hasRules;try{hasRules=!!node.sheet.cssRules;}catch(ex){pollCount+=1;if(pollCount<200){setTimeout(function(){pollGecko(node);},50);}else{hasRules&&finish('css');}
return;}
finish('css');}
function pollWebKit(){var css=pending.css,i;if(css){i=styleSheets.length;while(--i>=0){if(styleSheets[i].href===css.urls[0]){finish('css');break;}}
pollCount+=1;if(css){if(pollCount<200){setTimeout(pollWebKit,50);}else{finish('css');}}}}
return{css:function(urls,callback,obj,context){load('css',urls,callback,obj,context);},js:function(urls,callback,obj,context){load('js',urls,callback,obj,context);}};})(this.document);(function(global,main,modules,modules_options,options){var initialized_modules={},global_eval=function(code){return global.Function('return '+code)();},global_document=global.document,local_undefined,register_module=function(moduleName,module){lmd_trigger('lmd-register:before-register',moduleName,module);var output={'exports':{}};initialized_modules[moduleName]=1;modules[moduleName]=output.exports;if(!module){module=lmd_trigger('js:request-environment-module',moduleName,module)[1]||global[moduleName];}else if(typeof module==='function'){var module_require=lmd_trigger('lmd-register:decorate-require',moduleName,lmd_require)[1];if(modules_options[moduleName]&&modules_options[moduleName].sandbox&&typeof module_require==='function'){module_require=local_undefined;}
module=module(module_require,output.exports,output)||output.exports;}
module=lmd_trigger('lmd-register:after-register',moduleName,module)[1];return modules[moduleName]=module;},lmd_events={},lmd_trigger=function(event,data,data2,data3){var list=lmd_events[event],result;if(list){for(var i=0,c=list.length;i<c;i++){result=list[i](data,data2,data3)||result;if(result){data=result[0]||data;data2=result[1]||data2;data3=result[2]||data3;}}}
return result||[data,data2,data3];},lmd_on=function(event,callback){if(!lmd_events[event]){lmd_events[event]=[];}
lmd_events[event].push(callback);},lmd_require=function(moduleName){var module=modules[moduleName];var replacement=lmd_trigger('*:rewrite-shortcut',moduleName,module);if(replacement){moduleName=replacement[0];module=replacement[1];}
lmd_trigger('*:before-check',moduleName,module);if(initialized_modules[moduleName]&&module){return module;}
lmd_trigger('*:before-init',moduleName,module);if(typeof module==='string'&&module.indexOf('(function(')===0){module=global_eval(module);}
return register_module(moduleName,module);},output={'exports':{}},sandbox={'global':global,'modules':modules,'modules_options':modules_options,'options':options,'eval':global_eval,'register':register_module,'require':lmd_require,'initialized':initialized_modules,'document':global_document,'on':lmd_on,'trigger':lmd_trigger,'undefined':local_undefined};for(var moduleName in modules){initialized_modules[moduleName]=0;}
main(lmd_trigger('lmd-register:decorate-require','main',lmd_require)[1],output.exports,output);})
(this,(function(require,exports,module){var $=require('jQuery'),Slider=require('slider'),Overlay=require('overlay');var pluginName='wgSlider';var publicMethods={'update':'update'};var processDataFromElement=function(element,overlay){var defaultPicture={type:'picture',created_date:'',popup_src:'',med_popup_src:'',small_popup_src:'',title:'',link:'',category_link:'',category_title:'',description:''};var $element=$(element),url=$element.attr('src'),title=$element.attr('title'),description=$element.attr('alt'),rel=$element.attr('rel'),item;item=$.extend({},defaultPicture,{id:_.uniqueId(),popup_src:url,med_popup_src:url,small_popup_src:url,title:title,description:description});$element.attr('data-slider-id',item.id);overlay.addSeparateImage(item);$element.on('click.wgSlider',function(e){e.preventDefault();e.stopPropagation();var id=$(this).attr('data-slider-id');overlay.openImage(id);});$element.parents('a').on('click',function(e){e.preventDefault();});return{list:[item]};};$.fn[pluginName]=function(options){var otherArguments=Array.prototype.slice.call(arguments,1),bodyEl=document.querySelector('body'),overlay;return this.each(function(){var value=this,overlay=$[pluginName](otherArguments);if(!$.data(value,'plugin_'+pluginName)){$.data(value,'plugin_'+pluginName,processDataFromElement(value,overlay));return $.data(value,'plugin_'+pluginName);}else if(publicMethods[options]){var plugin=$.data(value,'plugin_'+pluginName);}});};$[pluginName]=function(options){var overlay,bodyEl=document.querySelector('body');if(!$.data(bodyEl,'plugin_'+pluginName)){overlay=new Overlay(options);$.data(bodyEl,'plugin_'+pluginName,overlay);}else{overlay=$.data(bodyEl,'plugin_'+pluginName);}
return overlay;};$(function(){$('.fancybox-image').wgSlider();});}),{"browsers_detection":(function(require,exports,module){var $=require('jQuery'),navigator=require('navigator');var IOS_REGEXP=/(i(pod|phone|pad)+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i;var matched,browser={};$.uaMatch=function(ua){var match,browserMatch,webkitMatch,mobileMatch,chromeMatch,androidStandartBrowserMatch,windowsPhoneDesktopMatch,macMatch,iosMatch;ua=ua.toLowerCase();match=/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(chromium) ((\d+)?[\w\.]+)/.exec(ua)||/(yabrowser)\/((\d+)?[\w\.]+)/.exec(ua)||/(kindle)\/((\d+)?[\w\.]+)/.exec(ua)||ua.indexOf('compatible')<0&&/(firefox)\/((\d+)?[\w\.-]+)/.exec(ua)||/(iemobile)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)\/.+rv[^\w]+([\w\.]+)/.exec(ua)||/(android)[\/\s-]?([\w\.]+)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(mobile)\/\w+\s(safari)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(safari)/.exec(ua)||/version\/.+?\/\w+\s(safari)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(mozilla)\/((\d+)?[\w\.]+).+gecko/.exec(ua);webkitMatch=/webkit/.exec(ua);mobileMatch=/mobile/.exec(ua);windowsPhoneDesktopMatch=/wpdesktop/.exec(ua);chromeMatch=/(chrome)[ \/]([\w.]+)/.exec(ua);androidStandartBrowserMatch=/(android)[\/\s-]?([\w\.]+).*?version\/([\w\.]+).+?(mobile)*\s+(safari)/.exec(ua);iosMatch=IOS_REGEXP.exec(ua);if(match===null){return{};}
browserMatch={browser:match[1]||'',version:match[2]||'0',mobile:mobileMatch!==null?true:false,webkit:webkitMatch!==null?true:false,ios:(iosMatch!==null&&iosMatch[0]!==undefined)};if(match[1]==='android'){if(chromeMatch!==null&&chromeMatch[1]==='chrome'){browserMatch.browser=chromeMatch[1];browserMatch.version=chromeMatch[2];}else{if(androidStandartBrowserMatch!==null){browserMatch.browser=androidStandartBrowserMatch[5];browserMatch.version=androidStandartBrowserMatch[3];}}
browserMatch.android=true;browserMatch.osVersion=match[2];}else if(match[4]==='safari'){browserMatch.browser=match[4];browserMatch.version=match[1];}else if(match[3]==='safari'){browserMatch.browser=match[3];browserMatch.version=match[1];}else if(browserMatch.browser==='kindle'){browserMatch.mobile=true;}else if(match[1]==='trident'){if(windowsPhoneDesktopMatch!==null){browserMatch.browser='iemobile';browserMatch.mobile=true;}else{browserMatch.browser='msie';}}
return browserMatch;};matched=$.uaMatch(navigator.userAgent);browser=$.extend({},matched);if(matched.browser&&matched.browser!==''){browser[matched.browser]=true;}
if(matched.android){browser.android=true;browser.mobile=true;}
browser.mac=window.navigator&&window.navigator.platform&&window.navigator.platform.toLowerCase().indexOf('mac')!==-1;$.browser=browser;module.exports=browser;}),"css_utils":(function(require,exports,module){var $=require('jQuery'),browserDetection=require('browsers_detection');var MIN_BUGGY_ANDROID_VERSION=3.0,MAX_BUGGY_ANDROID_VERSION=4.0,TRANSITION_END_FALLING_TIMEOUT=0.5;var touchEventBugDetectionCache;var isAndroidWithTouchEventsBug=function(){var osVersion,isVersionWithBug;if(touchEventBugDetectionCache===undefined){osVersion=parseFloat(browserDetection.osVersion);isVersionWithBug=(osVersion>=MIN_BUGGY_ANDROID_VERSION&&osVersion<=MAX_BUGGY_ANDROID_VERSION);touchEventBugDetectionCache=(browserDetection.android&&isVersionWithBug);}
return touchEventBugDetectionCache;};var whichTransitionEvent=function(){var t,el=document.createElement('fakeelement'),transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(transitions.hasOwnProperty(t)&&el.style[t]!==undefined){return transitions[t];}}};var CSSUtils={parseCssMatrix:function(string){var m=this,type,parts,i;string=String(string).trim();if(string==='none'){return m;}
type=string.slice(0,string.indexOf('('));if(type==='matrix3d'){parts=string.slice(9,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[1];m.m13=parts[2];m.m14=parts[3];m.m21=m.c=parts[4];m.m22=m.d=parts[5];m.m23=parts[6];m.m24=parts[7];m.m31=parts[8];m.m32=parts[9];m.m33=parts[10];m.m34=parts[11];m.m41=m.e=parts[12];m.m42=m.f=parts[13];m.m43=parts[14];m.m44=parts[15];}else if(type==='matrix'){m.affine=true;parts=string.slice(7,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[2];m.m41=m.e=parts[4];m.m21=m.c=parts[1];m.m22=m.d=parts[3];m.m42=m.f=parts[5];}else{throw new TypeError('Invalid Matrix Value');}
return m;},prefixWrap:function(property,value,vendors,valuePrefixing){var results={},valueOfProp;vendors=vendors||['-webkit-','-moz-','-ms-','-o-',''];valuePrefixing=valuePrefixing||false;$.each(vendors,function(index,vendor){if(!valuePrefixing){valueOfProp=value;}else{valueOfProp=vendor+value;}
results[vendor+property]=valueOfProp;});return results;},getMatrix3d:function(v){var vendors=['-webkit-','-ms-',''],cssValue,translateValue,matrix,matrixToString,translateValue;if(v.x===undefined){v.x=0;}
if(v.y===undefined){v.y=0;}
if(v.z===undefined){v.z=0;}
if(v.scale===undefined){v.scale=1;}
matrix=[[v.scale,0,0,0],[0,v.scale,0,0],[0,0,v.scale,0],[v.x,v.y,0,1]];matrixToString=function(m){var result=[];$.each(m,function(i,row){result.push(row.join(','));});return'matrix3d('+result.join(',')+')';};translateValue=matrixToString(matrix);cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},whichTransitionEvent:whichTransitionEvent,bindTransitionEnd:function($el,callback,options){var transitionEnd=whichTransitionEvent();options=$.extend({},{timeout:TRANSITION_END_FALLING_TIMEOUT},options);$el.one(transitionEnd,function(){if(callback!==undefined){window.clearTimeout($el.data('transitionEndTimeout'));callback.call(this);}});$el.data('transitionEndTimeout',window.setTimeout(function(){if(callback!==undefined){$el.off(transitionEnd);callback.call(this);}},options.timeout));},detectSupportTransition:function(){var prefixes='transition WebkitTransition MozTransition '+'OTransition msTransition KhtmlTransition'.split(' '),i,len;for(i=0,len=prefixes.length;i<len;i++){if(document.createElement('div').style[prefixes[i]]!==undefined){return prefixes[i];}}
return false;},detectSupport3dTransition:function(){var isOldOrBuggyAndroid=browserDetection.android&&parseFloat(browserDetection.osVersion)<4.1&&browserDetection.safari,isOldOpera=browserDetection.opera&&parseFloat(browserDetection.version)<13,isIE9=browserDetection.msie&&parseFloat(browserDetection.version)<10;if(isOldOrBuggyAndroid||isOldOpera||isIE9){return false;}
return Modernizr.csstransforms3d&&Modernizr.csstransforms&&Modernizr.csstransitions;},detectSupport2dTransition:function(){return Modernizr.csstransforms&&Modernizr.csstransitions;},isTouch:function(){return document.createTouch!==undefined||('ontouchstart'in window)||('onmsgesturechange'in window)||navigator.msMaxTouchPoints;},bindOrientaionChangeToResize:function($window){$window.on('orientationchange',function(){$window.resize();});},isAndroidWithTouchEventsBug:isAndroidWithTouchEventsBug,bindPreventClickAndPropagation:function(els){if(!$.isArray(els)){els=[els];}
$.each(els,function(i,$el){$el.on('click',function(e){e.preventDefault();e.stopPropagation();});});},preventDefaultAndPropogationOnHammer:function(e){function preventAndStopPropagateOriginalEvent(e){e.preventDefault();e.stopPropagation();if(e.srcEvent!==undefined){e.srcEvent.preventDefault();}};if(e!==undefined){e.preventDefault();e.stopPropagation();if(e.gesture!==undefined){if(browserDetection.msie&&(browserDetection.version==='7.0'||browserDetection.version==='8.0')){try{preventAndStopPropagateOriginalEvent(e.gesture);}
catch(e){console&&console.error('Incorrect preventing propagation and prevent default '
+' in old IE inside jquery');}}else{preventAndStopPropagateOriginalEvent(e.gesture);}}}},getPositionIn3d:function(value){var vendors=['-webkit-','-ms-',''],cssValue,translateValue;value.x=value.x||0;value.y=value.y||0;value.z=value.z||0;translateValue='translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getPositionWithJquery:function(value){var cssValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
cssValue={top:value.y+'px',left:value.x+'px'};return cssValue;},isWideDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1450px)');},isSmallDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (max-width: 1449px)');},isTabletRetina:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 800px), (min-width: 800px) and (-webkit-min-device-pixel-ratio: 1.5),(min-width: 800px) and (min-resolution: 144dpi)');},isGeneralTabletView:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 481px) and (max-width: 799px)')},isMobileView:function(){return browserDetection.mobile&&Modernizr.mq('all and (max-width: 481px)')},isDesktopOver1100:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1100px)')},isDesktopUnder1100:function(){return!browserDetection.mobile&&Modernizr.mq('all and (max-width: 1099px)')}};module.exports=CSSUtils;}),"data_manager":(function(require,exports,module){var MobilePaginator=require('mobile_paginator');var defaultConfig={thumb_src:'/public/images/spinner.gif',popup_src:'/public/images/spinner.gif',defaultIdForLoadingItem:'loading',usePaginator:false};var DataManager=function(data,options){var $this=this;this.config=defaultConfig;this.options=options;this.itemsHash={};this.itemsIndex=[];this.currentIndex=0;this.tempItemWithLoader={thumb_src:this.config.thumb_src,popup_src:this.config.popup_src,defaultIdForLoadingItem:this.config.id};if(this.config.usePaginator){this.mobilePaginator=new MobilePaginator({'filterParams':this.config.filterParams});this.mobilePaginator.loadData(function(data){$this.data=data;$this.init();});}else{setTimeout(function(){$this.data=data;$this.init();},0);}};DataManager.prototype={init:function(){this.addData(this.data);if(typeof this.options.onReadyHandler==='function'){this.options.onReadyHandler.call(this);}},addData:function(data,toStart){var itemList=data.list,i,len;if(!toStart){for(i=0,len=itemList.length;i<len;i++){this.addItem(itemList[i]);}}else{this.rebuildIndex(itemList);}},addItem:function(item){if(item.id===undefined){throw new Error('Incorrect item passed into the datamanager!');}
if(this.itemsHash[item.id]===undefined){this.itemsHash[item.id]=item;this.itemsIndex.push(item.id);}},setCurrentIndex:function(options){var id=parseInt(options.id,10);if(options.id!==undefined&&this.itemsHash[id]!==undefined){this.currentIndex=this.searchIndexById(id);return true;}else if(options.index&&this.itemsIndex[this.currentIndex]!==undefined){this.currentIndex=options.index;return true;}
return false;},rebuildIndex:function(newItems){var oldCurrentIndex=this.getCurrentIndex(),oldIndexHash=this.itemsIndex,newIndexHash=[],newLength=newItems.length,i,len;for(i=0,len=newLength;i<len;i++){newIndexHash.push(newItems[i].id);this.itemsHash[newItems[i].id]=newItems[i];}
newIndexHash=newIndexHash.concat(oldIndexHash);this.itemsIndex=newIndexHash;this.setCurrentIndex({index:oldCurrentIndex+newLength});},next:function(){var currentIndex=this.currentIndex,nextIndex=currentIndex+1,nextItem=this.getNextItem();if(nextItem!==undefined){this.currentIndex=nextIndex;}
return nextItem;},prev:function(){var currentIndex=this.currentIndex,prevIndex=currentIndex-1,prevItem=this.getPrevItem();if(prevItem!==undefined){this.currentIndex=prevIndex;}
return prevItem;},searchIndexById:function(id){var i,len,itemsIndex=this.itemsIndex;for(i=0,len=this.itemsIndex.length;i<len;i++){if(parseInt(itemsIndex[i],10)===id){return i;}}
return-1;},getItemById:function(id){return this.itemsHash[id];},updateItem:function(item){var id=item.id,oldItem;if(this.itemsHash[id]!==undefined){oldItem=this.itemsHash[id];this.itemsHash[id]=$.extend(true,oldItem,item);}else{this.addItem(item);}},getIdByIndex:function(index){return this.itemsIndex[index];},getCurrentItem:function(){return this.itemsHash[this.itemsIndex[this.currentIndex]];},getNextItem:function(){var currentIndex=this.currentIndex,nextIndex=currentIndex+1,tempItem=this.tempItemWithLoader,$this=this;var getNextPage=function(){if($this.config.usePaginator&&$this.mobilePaginator.isNextPage()){this.mobilePaginator.loadNextPage(function(data){$this.addData(data);$this.onRebuildIndexHandler.call($this);});return{thumb_src:tempItem.thumb_src,id:tempItem.id};}else{return undefined;}};if(nextIndex>this.itemsIndex.length-1){return getNextPage();}else if(nextIndex===this.itemsIndex.length-1){getNextPage();return this.itemsHash[this.itemsIndex[nextIndex]];}else{return this.itemsHash[this.itemsIndex[nextIndex]];}},getPrevItem:function(){var $this=this,currentIndex=this.currentIndex,prevIndex=currentIndex-1,mobilePaginator=this.mobilePaginator,tempItem=this.tempItemWithLoader;if(prevIndex<1){if(this.config.usePaginator&&mobilePaginator.isPrevPage()){this.rebuildingIndex=true;this.mobilePaginator.loadPrevPage(function(data){$this.addData(data,true);$this.onRebuildIndexHandler();this.rebuildingIndex=false;});}}
if(prevIndex>=0){return this.itemsHash[this.itemsIndex[prevIndex]];}else if(this.rebuildingIndex&&prevIndex<0){return{thumb_src:tempItem.thumb_src,id:tempItem.id};}else{return undefined;}},getCurrentIndex:function(){return this.currentIndex;},filterItems:function(itemIds){this.itemsIndex=itemIds;return this.itemsIndex;}};module.exports=DataManager;}),"gallery":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils'),templates=require('templates');var config={galleryListSelector:'.js-gallery-list',galleryNextSelector:'.js-gallery-control-next',galleryPrevSelector:'.js-gallery-control-prev',galleryCurrentSlideClass:'minislider_item__current'};var Gallery=function($element){this.$element=$element;this.config=config;this.init();};Gallery.prototype={init:function(){var $element=this.$element,config=this.config;this.$next=$element.find(config.galleryNextSelector);this.$prev=$element.find(config.galleryPrevSelector);this.$list=$element.find(config.galleryListSelector);this.offset=0;this.$list.css('left',0);this.$list.empty();this.list=[];this.activated=false;this.$imageMiniSlide=$(templates.getTemplate('minislider_item_image')());this.$videoMiniSlide=$(templates.getTemplate('minislider_item_video')());this.bindHandlers();},activate:function(item){var $docFragment=$(document.createDocumentFragment()),self=this;if(this.activated){this.deactivate();}
this.parentItem=item;this.list=item.list;this.$list.empty();$.each(this.list,_.bind(function(i,minisliderItem){var $newSlide;if(minisliderItem.type==='gallery-picture'){$newSlide=this.$imageMiniSlide.clone();}else if(minisliderItem.type==='gallery-video'){$newSlide=this.$videoMiniSlide.clone();}
$newSlide.find('img').attr('src',minisliderItem.preview);$newSlide.attr('data-index',i);minisliderItem.parentId=self.parentItem.id;$docFragment[0].appendChild($newSlide[0]);},this));this.$list[0].appendChild($docFragment[0]);this.bindActions();this.setCurrentSlide(this.$list.children().eq(item.listCurrentIndex||0),true);this.$element.show(200,_.bind(function(){this.updateElementsSize();this.setupControls();this.activated=true;},this));},deactivate:function(){this.activated=false;this.$list.css('left',0);this.$list.children().hammer().off('tap');this.$element.hide();},setupControls:function(){var offset=this.getCurrentOffset();if(this.maxOffset<0){this.$prev.hide();this.$next.hide();}else if(offset===0){this.$prev.hide();this.$next.show();}else if(offset===this.maxOffset){this.$prev.show();this.$next.show();}else{this.$next.show();this.$prev.show();}},updateElementsSize:function(){this.galleryWidth=this.$element.width();this.slidesWidth=this.getSlidesWidth();this.maxOffset=this.slidesWidth-this.galleryWidth;},isGalleryNeedControls:function(){return this.maxOffset>0;},getSlidesWidth:function(){var width=0;this.$list.children().each(function(){var $slide=$(this);width=width+$slide.width();});return width;},getCurrentOffset:function(){var offset=parseInt(this.$list.css('left'),10);this.offset=offset;return offset;},setCurrentOffset:function(value){if(value===this.offset){return value;}
if(value>0){value=0;this.$prev.hide();this.$next.show();}else if(Math.abs(value)>this.maxOffset){value=-this.maxOffset;this.$prev.show();this.$next.hide();}else{this.$next.show();}
if(value<0){this.$prev.show();}
this.$list.css('left',value);this.offset=value;return value;},offsetToPrev:function(){var position=this.getCurrentOffset(),offset=position+this.galleryWidth/2;if(offset>0){offset=0;this.$prev.hide();}
this.$next.show();this.$list.stop().animate({'left':offset},200,'linear');this.offset=offset;},offsetToNext:function(){var position=this.getCurrentOffset(),offset=position-this.galleryWidth/2;if(Math.abs(offset)>this.maxOffset){offset=-this.maxOffset;this.$next.hide();}
this.$prev.show();this.$list.stop().animate({'left':offset},200,'linear');this.offset=offset;},setCurrentSlide:function($galleryItem,ignoreUpdateImage){var index=$galleryItem.data('index'),item=this.list[index];this.parentItem.listCurrentIndex=index;this.$list.children().removeClass(this.config.galleryCurrentSlideClass);$galleryItem.addClass(this.config.galleryCurrentSlideClass);this.$element.data('current',item.id);this.currentSlideItem=item.id;if(!ignoreUpdateImage){this.setSlideImage(item);}},setSlideImage:function(item){this.$element.trigger('updateslide',[item]);},bindHandlers:function(){this.$next.hammer().on('touch.wg',_.bind(function(e){e.preventDefault();e.gesture.preventDefault();e.stopPropagation();e.gesture.stopDetect();this.offsetToNext();},this));this.$prev.hammer().on('touch.wg',_.bind(function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);this.offsetToPrev();},this));this.$list.hammer().on('dragstart',_.bind(function(e){var offset=this.getCurrentOffset();e.stopPropagation();if(this.isGalleryNeedControls()){this.$list.hammer({preventDefault:true}).on({'drag':_.bind(function(e){var delta=e.gesture.deltaX;this.setCurrentOffset(offset+delta);},this),'dragend':_.bind(function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);this.$list.hammer().off('drag dragend');},this)});}},this));CSSUtils.bindPreventClickAndPropagation([this.$next,this.$prev,this.$list]);$(window).resize(_.bind(function(){var offset;if(this.activated){offset=this.getCurrentOffset();this.updateElementsSize();if(this.maxOffset<0){offset=0;}else if(Math.abs(offset)>this.maxOffset){offset=-this.maxOffset;this.$next.hide();}
this.setupControls();this.$list.stop().animate({'left':offset},200,'linear');}},this));},bindActions:function(){var self=this;this.$list.children().hammer().on('tap.wg',function(e){var $galleryItem=$(this);CSSUtils.preventDefaultAndPropogationOnHammer(e);self.setCurrentSlide($galleryItem);});}};module.exports=Gallery;}),"gettext":(function(require,exports,module){var window=require('window');var stubGettext=function(text){return text;};if(window.gettext===undefined){module.exports=stubGettext}else{module.exports=window.gettext;}}),"key_codes":(function(require,exports,module){module.exports={ESCAPE:27,ENTER:13,DOWN:40,UP:38,RIGHT:39,LEFT:37,BACKSPACE:8,TAB:9,PAGE_DOWN:34,PAGE_UP:33,HOME:36,END:35,SPACE:32};}),"mobile_gestures":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils');var TOUCHEND_HANDLER_TIMEOUT=1000,CLICK_MAX_DISTANCE=10,SWIPE_MIN_DISTANCE=100;var defaultOptions={useNativeEvents:false};var CustomGestures=function($target,options){this.options=$.extend({},defaultOptions,options);this.$body=this.options.$body||$('body');this.$target=$target||this.$body;this.initGestures();};CustomGestures.prototype={initGestures:function(){this.gestureState={};this.gestureState.startCoords={};this.gestureState.endCoords={};this.activate();},activate:function(){var self=this;if(this.options.useNativeEvents){this.$target.on({'touchstart.swipebox':function(e){self.touchStartHandler(e);},'touchend.swipebox':function(e){self.touchEndHandler(e);}});}else{this.$target.hammer({dragMinDistance:0}).on('dragstart',function(e){self.hammerStart(e);});}},deactivate:function(){this.$target.hammer().off('dragstart');},hammerStart:function(e){var $this=this;if(e.gesture!==undefined){if(e.gesture.touches.length>1){return;}
this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};this.gestureState.startCoords.pageX=e.gesture.touches[0].pageX||e.gesture.deltaX;this.$body.hammer({prevent_default:true}).on({'drag':function(e){$this.hammerTracker(e,function(distance){$this.$target.trigger('customswipemovetrack',distance);});},'dragend.swipemoving':function(e){$this.hammerEndHandler(e);}});this.hammerEndTimeout=window.setTimeout(function(){$this.hammerEndHandler();},TOUCHEND_HANDLER_TIMEOUT);}},hammerTracker:function(e,callback){var $this=this;e.preventDefault();e.gesture.preventDefault();this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};this.gestureState.distance=this.gestureState.endCoords.pageX-this.gestureState.startCoords.pageX;callback.call(this,this.gestureState.distance);window.clearTimeout(this.hammerEndTimeout);this.hammerEndTimeout=window.setTimeout(function(){$this.hammerEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},hammerEndHandler:function(e){var gestureState=this.gestureState,distance=gestureState.distance;window.clearTimeout(this.touchEndTimeout);CSSUtils.preventDefaultAndPropogationOnHammer(e);if(e!==undefined&&e.gesture!==undefined){this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};distance=gestureState.endCoords.pageX-gestureState.startCoords.pageX;this.gestureState.distance=distance;}
this.detectSwipe(distance,e);this.$body.hammer({preventDefault:false}).off('drag dragend');},touchStartHandler:function(e){var $this=this;this.gestureState.endCoords=e.originalEvent.targetTouches[0];this.gestureState.startCoords.pageX=e.originalEvent.targetTouches[0].pageX;this.$body.on({'touchmove.swipemoving':function(e){$this.touchMoveTracker(e,function(distance){$this.$target.trigger('swipemovetrack',distance);});},'touchend.swipemoving':function(e){$this.touchEndHandler(e);}});this.touchEndTimeout=window.setTimeout(function(){$this.touchEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},touchMoveTracker:function(e,callback){var $this=this;e.preventDefault();this.gestureState.endCoords=e.originalEvent.targetTouches[0];this.gestureState.distance=this.gestureState.endCoords.pageX-this.gestureState.startCoords.pageX;callback.call(this,this.gestureState.distance);window.clearTimeout(this.touchEndTimeout);this.touchEndTimeout=window.setTimeout(function(){$this.touchEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},touchEndHandler:function(e){var gestureState=this.gestureState,distance=gestureState.distance;window.clearTimeout(this.touchEndTimeout);if(e!==undefined){this.gestureState.endCoords=e.originalEvent.changedTouches[0];distance=gestureState.endCoords.pageX-gestureState.startCoords.pageX;this.gestureState.distance=distance;}
this.detectSwipe(distance,e);this.$body.off('.swipemoving');},detectSwipe:function(distance,e){var type='noswipe';if(Math.abs(distance)<CLICK_MAX_DISTANCE){type='customtouch';}else if(distance>=SWIPE_MIN_DISTANCE){type='customswipeleft';}else if(distance<=-SWIPE_MIN_DISTANCE){type='customswiperight';}else if(distance===undefined||distance<=SWIPE_MIN_DISTANCE&&distance>=-SWIPE_MIN_DISTANCE){type='customswipeincomplete';}
this.gestureState.distance=0;this.gestureState.startCoords={};this.gestureState.endCoords={};this.$target.trigger(type,e);}};module.exports=CustomGestures;}),"mobile_paginator":(function(require,exports,module){var $=require('jQuery'),dataLoader;var defaultPaginatorConfig={defaultPage:1,pageSize:50,filterParams:{'content_type':'/pictures/',onPage:50,'approved_status':'approved'},minPageNumber:1};var Paginator=function(config){this.config=$.extend(true,{},defaultPaginatorConfig,config);this.pageSize=this.config.pageSize;this.currentPage=this.config.defaultPage;this.allItemsNumber=0;this.filterParams=this.config.filterParams;};Paginator.prototype={loadData:function(callback){var $this=this,allItemsNumber;this.filterParams.page=this.getCurrentPage();dataLoader.setOnPage(this.filterParams.onPage);dataLoader.getFiltredItemsAjax(this.filterParams,function(response){var data,isAllItemFieldCorrect;try{data=JSON.parse(response);}
catch(e){console.log('Error on parsing JSON while loading data by Paginator');console.log(e);}
if(data===undefined){throw new Error('The data for the request is absent. '+'Filter params is '+JSON.stringify($this.filterParams,null,4));}
if(callback!==undefined){callback.call(this,data);}
if($this.allItemsNumber!==0){return true;}
isAllItemFieldCorrect=(data.all_items!==undefined&&(typeof data.all_items==='string'||data.all_items==='number'));if(isAllItemFieldCorrect){allItemsNumber=parseInt(data.all_items,10);if(allItemsNumber>=0){$this.allItemsNumber=allItemsNumber;}}else{throw new Error('The requested data is incorrect, the all_items key is absent. '+'The data object is '+JSON.stringify(data,null,4));}});},setCurrentPage:function(curPage){this.currentPage=curPage;},getCurrentPage:function(){return this.currentPage;},loadNextPage:function(callback){if(this.isNextPage()){this.setCurrentPage(this.getCurrentPage()+1);this.loadData(callback);return true;}else{return false;}},loadPrevPage:function(callback){if(this.isPrevPage()){this.setCurrentPage(this.getCurrentPage()-1);this.loadData(callback);return true;}else{return false;}},isNextPage:function(){if(this.getCurrentPage()*this.pageSize<this.allItemsNumber){return true;}else{return false;}},isPrevPage:function(){var minPageNumber=this.config.minPageNumber;if(this.getCurrentPage()>minPageNumber){return true;}else{return false;}}};module.exports=Paginator;}),"mobile_slide_position_manager":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils');'use strict';var RELOCATE_OFFSET=3000,TRANSITION_END_FALLING_TIMEOUT=600,MOVE_END_ANIMATION_TIMEOUT=700,defaultOptions={animationClass:'wgslider-slide-animation'};var SliderItem=function($slide,options){this.$slide=$slide;this.options=$.extend({},defaultOptions,options);this.slideWidth=options.width;this.currentOffset={};this.position=options.position;this.number=options.number;this.definePositioningStrategy();this.currentOffset.x=(this.position-this.number)*this.slideWidth;};SliderItem.prototype={definePositioningStrategy:function(){if(this.doCss3dTrans()){this.getSlidePosition=this.getSlidePositionIn3d;this.positionSlide=this.positionSlideWith3d;}else{this.getSlidePosition=this.getSlidePositionWithJquery;this.positionSlide=this.positionSlideWithJquery;}},doCss3dTrans:function(){return CSSUtils.detectSupport3dTransition();},getSlidePositionIn3d:function(value){var vendors=['-webkit-','-ms-',''],cssValue,translateValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
if(value.z===undefined){value.z=0;}
translateValue='translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getSlidePositionWithJquery:function(value){var cssValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
cssValue={top:value.y+'px',left:value.x+'px'};return cssValue;},moveToNext:function(callback,options){if(this.position===-1){this.relocate(1);}else{this.position=this.position-1;this.positionSlide(callback,options);}},moveToPrevious:function(callback,options){if(this.position===1){this.relocate(-1);}else{this.position=this.position+1;this.positionSlide(callback,options);}},positionSlideWith3d:function(callback,options){var transXOffset=(this.position-this.number)*this.slideWidth,$this=this,isAlreadyAnimating=this.$slide.data('animating');options=options||{animating:true};if(options.animating){if(!isAlreadyAnimating){this.$slide.addClass(this.options.animationClass);this.$slide.data('animating',true);}}else{this.$slide.removeClass(this.options.animationClass);this.$slide.data('animating',false);}
if(this.position===0){var transitionEnd=CSSUtils.whichTransitionEvent();this.$slide.one(transitionEnd,function(){if(callback!==undefined){window.clearTimeout($this.transitionSlideTimeout);callback.call(this);}});this.transitionSlideTimeout=window.setTimeout(function(){if(callback!==undefined){callback.call(this);}},TRANSITION_END_FALLING_TIMEOUT);}
this.$slide.css(this.getSlidePositionIn3d({x:transXOffset}));},positionSlideWithJquery:function(callback,options){var transXOffset=(this.position-this.number)*this.slideWidth,targetCss,animationOptions={duration:400};options=options||{animating:true};if(!options.animating){animationOptions.duration=0;}
if(this.position===0){animationOptions.complete=function(){if(callback!==undefined){callback.call(this);}};}
targetCss=this.getSlidePositionWithJquery({x:transXOffset});this.$slide.animate(targetCss,animationOptions);},relocate:function(newPosition){var positionValue={x:0,y:0},$slide=this.$slide,animationClass=this.options.animationClass;if($slide.hasClass(animationClass)){$slide.removeClass(animationClass);}
positionValue.x=(this.position-this.number)*this.slideWidth;positionValue.y=RELOCATE_OFFSET;$slide.css(this.getSlidePosition(positionValue));this.position=newPosition;positionValue.x=(this.position-this.number)*this.slideWidth;$slide.css(this.getSlidePosition(positionValue));positionValue.y=0;$slide.css(this.getSlidePosition(positionValue));$slide.trigger('relocateslide');},getTranslateValue:function(value){if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
if(value.z===undefined){value.z=0;}
return'translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';},offsetSlide:function(distance,options){var currentTranslate3dValue=(this.position-this.number)*this.slideWidth;var newPosition=currentTranslate3dValue+distance;if(options&&options.animating){this.$slide.addClass(this.options.animationClass);}else{this.$slide.removeClass(this.options.animationClass);}
this.$slide.css(this.getSlidePosition({x:newPosition}));}};var SlidePositionManager=function($slides,options){var slideWidth=options.width,sliderItems=[];$slides.each(function(index,slide){sliderItems.push(new SliderItem($(slide),{position:index-1,number:index,width:slideWidth,animationClass:options.animationClass}));});this.$slides=$slides;this.sliderItems=sliderItems;this.options=$.extend({},defaultOptions,options);};SlidePositionManager.prototype={orderSlides:function(direction){var orders={'back':[0,-1,1],'forward':[0,1,-1]},sliderItems=this.sliderItems,orderedSliderItems=[],order=orders[direction];$.each(order,function(index,position){$.each(sliderItems,function(i,sliderItem){if(sliderItem.position===position){orderedSliderItems.push(sliderItem);}});});return orderedSliderItems;},moveForward:function(callback){var items=this.orderSlides('forward'),slideReadyCounter=2,self=this;$.each(items,function(index,sliderItem){sliderItem.moveToNext(function(){slideReadyCounter=slideReadyCounter-1;if(slideReadyCounter<0){clearTimeout(self.slidesdeadyTimeout);callback.call(this);this.$slide.trigger('slidesready');}},{animating:true});});this.slidesdeadyTimeout=setTimeout(_.bind(function(){callback.call(this);slideReadyCounter=slideReadyCounter+1;items[items.length-1].$slide.trigger('slidesready');this.$slides.removeClass(this.options.animationClass);},this),MOVE_END_ANIMATION_TIMEOUT);},moveBack:function(callback){var items=this.orderSlides('back'),slideReadyCounter=2,self=this;$.each(items,function(index,sliderItem){sliderItem.moveToPrevious(function(){slideReadyCounter=slideReadyCounter-1;if(slideReadyCounter<0){clearTimeout(self.slidesdeadyTimeout);callback.call(this);this.$slide.trigger('slidesready');}},{animating:true});});this.slidesdeadyTimeout=setTimeout(_.bind(function(){slideReadyCounter=slideReadyCounter+1;callback.call(this);items[items.length-1].$slide.trigger('slidesready');this.$slides.removeClass(this.options.animationClass);},this),MOVE_END_ANIMATION_TIMEOUT);},offsetSlideItems:function(distance,options){$.each(this.sliderItems,function(index,sliderItem){sliderItem.offsetSlide(distance,options);});},updatePosition:function(width,options){$.each(this.sliderItems,function(index,sliderItem){sliderItem.slideWidth=width;sliderItem.positionSlide(undefined,options);});}};module.exports={SlidePositionManager:SlidePositionManager,SliderItem:SliderItem};}),"overlay":(function(require,exports,module){var $=require('jQuery'),Slider=require('slider').MobileSlider,templates=require('templates'),window=require('window'),document=require('document');var config={sliderOverlaySelector:'.js-slider-overlay',sliderSelector:'.js-slider'};var sliderConfig={useGallery:false,updateUrl:false,translations:{'play_icon_text':require('gettext')('')},getCurrentItemByAjaxLink:''}
var SliderOverlay=function(options){var slider;this.config=config;this.init();this.options=$.extend({},sliderConfig,options);slider=new Slider(this.options);window.wgSliderInstance=slider;this.slider=slider;window.wgOverlay=this;window.wgSlider=slider;$(config.sliderSelector).on('sliderready',function(){slider.reassignType({picture:['resetSpecialHelpers','title']});slider.$date.hide();slider.$share.hide();});this.pageData={};};SliderOverlay.prototype={init:function(){var config=this.config,$overlay;this.$html=$('html');this.$body=$('body');$overlay=this.render();this.$overlay=$overlay;this.$slider=$overlay.find(config.sliderSelector);this.bindHandlers();},render:function(){var overlayHtml,$overlay=$('body').find(config.sliderOverlaySelector);if($overlay.length===0){overlayHtml=templates.getTemplate('overlay')();this.$body.append(overlayHtml);$overlay=$('body').find(config.sliderOverlaySelector);}
return $overlay;},open:function(id){this.bodyScrollTop=this.getPageScroll();this.$overlay.show();this.$slider.css('visibility','visible');this.$html.addClass('overlay-open');this.slider.activate(id);},getPageScroll:function(){var top=window.pageYOffset||document.documentElement.scrollTop;return top;},close:function(){this.slider.deactivate();},hideOverlay:function(){this.$html.removeClass('overlay-open');this.$body.scrollTop(this.bodyScrollTop);this.$html.scrollTop(this.bodyScrollTop);this.$overlay.hide();},openImage:function(id){this.slider.dataManager.filterItems([id]);this.open(id);},addSeparateImage:function(item){this.slider.dataManager.addData({list:[item]});},bindHandlers:function(){var self=this;this.$slider.on({'sliderclose.wgslider':function(){self.hideOverlay();}})}};module.exports=SliderOverlay;}),"slide_type":(function(require,exports,module){var $=require('jQuery'),templates=require('templates'),browserDetection=require('browsers_detection'),CSSUtils=require('css_utils'),Spinner=require('spinner');var config={emptyImageSrc:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',gallerySlideClass:'mediapopup_slide__gallery',videoSlideClass:'mediapopup_slide__video',videoPlaceholderSelector:'.js-video-placeholder',playVideoButtonSelector:'.js-video-play',videoThumbnailSelector:'.js-video-thumbnail',pictureImageSelector:'.js-picture-video',fadeVideoThumbnailDuration:400,spinnerOptions:{big_desktop:{lines:11,length:10,width:6,radius:14,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'},small_desktops:{lines:11,length:7,width:4,radius:11,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'},mobile:{lines:11,length:6,width:4,radius:9,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'}}};var emptyItems={'video':{id:'loading',type:'video',created_date:'',popup_src:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',title:'',link:''},'picture':{id:'loading',type:'picture',created_date:'',popup_src:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',title:'',link:''}};var typeHelpers={picture:function($slide,item){var $img=$slide.find('img');if(item===undefined){return $slide;}
$slide.data('url',item.url);window.setTimeout(function(){$img.prop('src',item.popup_src);},0);$slide.data('itemId',item.id);return $slide;},videos:function($slide,item){var $img=$slide.find('img'),$description=$slide.find(this.config.videoDescriptionSelector);if(item===undefined){return $slide;}
$img.data('url',item.url);window.setTimeout(function(){$img.prop('src',item.popup_src);},0);$slide.data('itemId',item.id);$description.text(item.title);return $slide;}};var Slide=function($element,item){this.$element=$element;if(item===undefined){this.item=emptyItems['picture'];}else{this.item=item;}
this.init();};Slide.prototype={init:function(){this.config=config;this.$videoSlide=$(templates.getTemplate('video_slide')({popup_src:config.emptyImageSrc}));this.$imageSlide=$(templates.getTemplate('picture_slide')({popup_src:config.emptyImageSrc}));this.isDesktop=true;this.activated=false;},deactivate:function(){var isGalleryWithVideoMode=this.$element.find('iframe').length!==0,isItemWithTypeVideo=this.item.type==='video';this.activated=false;if(isGalleryWithVideoMode||isItemWithTypeVideo){this.resetVideo();}},resetVideo:function(){var $slide=this.$element,item=this.item,config=this.config,$iframe,$videoPlaceholder,$playVideo,$videoThumbnail;$videoPlaceholder=$slide.find(config.videoPlaceholderSelector);$playVideo=$slide.find(config.playVideoButtonSelector);$videoThumbnail=$slide.find(config.videoThumbnailSelector);$videoThumbnail.show();$playVideo.show();$videoPlaceholder.empty();$iframe=this.resetVideoElement($videoPlaceholder,item.videoId);this.bindOpenEmbeddedVideoHandler($slide,$iframe,item.videoId);},resetVideoElement:function($videoPlaceholder,videoId){var $iframe,$a;if(this.isDesktop){$iframe=this.$videoSlide.find('iframe').clone();$videoPlaceholder.empty();this.updateIframeWithVideoId($iframe,videoId);return $iframe;}else{$a=this.$videoSlide.find('a');$videoPlaceholder.empty();this.updateLinkWithVideoId($a,videoId);return undefined;}},getElement:function(){return this.$element;},setItem:function(item,forceUpdate){if(item&&(item.id!==this.item.id)){this.activated=false;this.item=item;this.activate(item,forceUpdate);}else if(!this.activated){this.activate(item,forceUpdate);}},reset:function(){var $slide=this.$element,config=this.config;var $image=$slide.find(config.pictureImageSelector);this.deactivate();if($image.length){$image.attr('src',this.config.emptyImageSrc);}},updateIframeWithVideoId:function($iframe,videoId){$iframe.attr('src','https://web.archive.org/web/20181109111022/https://www.youtube.com/embed/'+videoId+'?autoplay=1&fs=1&showinfo=0');},updateLinkWithVideoId:function($a,videoId){$a.attr('href','https://web.archive.org/web/20181109111022/https://youtube.com/watch?v='+videoId+'&autoplay=1');$a.hammer().on('touch tap',function(e){e.stopPropagation();});},getSlideImage:function(item){if(item.type==='picture'){return item.popup_src;}else if(item.type==='video'){return this.getVideoThumbnailImage(item.videoId);}else if(item.type==='gallery'){return this.getSlideImage(item.list[0]);}},updateThumbnail:function($videoThumbnail,videoId){$videoThumbnail.attr('src',this.config.emptyImageSrc);$videoThumbnail.attr('alt',this.item.title);setTimeout(_.bind(function(){$videoThumbnail.attr('src',this.getVideoThumbnailImage(videoId));},this),0);},getVideoThumbnailImage:function(videoId){if(CSSUtils.isMobileView()){return'http://img.youtube.com/vi/'+videoId+'/0.jpg';}else{return'http://img.youtube.com/vi/'+videoId+'/maxresdefault.jpg';}},activate:function(item,forceUpdate){var $slide=this.$element,slideType=$slide.data('type')||'picture',$iframe,$newSlide,$a,imgSrc;if(item===undefined){return $slide;}
if(this.activated){return $slide;}
this.$element.trigger('deactivateslides');if(item.type==='video'||item.type==='gallery-video'){if(forceUpdate||(item.type!==slideType)){$slide.empty();if(!$slide.hasClass(config.videoSlideClass)){$slide.addClass(config.videoSlideClass);}
if(item.type!=='gallery-video'&&$slide.hasClass(config.gallerySlideClass)){$slide.removeClass(config.gallerySlideClass);}
$newSlide=this.$videoSlide.clone();this.updateThumbnail($newSlide.find(config.videoThumbnailSelector),item.videoId);if(this.isDesktop){$iframe=$slide.find('iframe').detach();}else{$a=$newSlide.find('a');this.updateLinkWithVideoId($a,item.videoId);}
this.appendNewSlideContent($slide,$newSlide);$slide.data('type','video');}else{if(this.isDesktop){$iframe=this.resetVideoElement($slide.find('.js-video-placeholder'),item.videoId);}else{$a=$slide.find('a');}
this.updateThumbnail($slide.find(config.videoThumbnailSelector),item.videoId);}
if(this.isDesktop){this.updateIframeWithVideoId($iframe,item.videoId);this.bindOpenEmbeddedVideoHandler($slide,$iframe,item.videoId);}else{this.updateLinkWithVideoId($a,item.videoId);}}else if(item.type==='gallery'){if(!$slide.hasClass(config.gallerySlideClass)){$slide.addClass(config.gallerySlideClass);}
this.convertTypesForMinislider(item);this.activate(item.list[item.listCurrentIndex||0]);}else if(item.type==='spinner'){this.$element.empty();this.$element.append('<div class="slider-spinner">');this.spinner=new Spinner(this.getSpinnerOptions()).spin(this.$element.find('.slider-spinner')[0]);$slide.data('type','spinner');}else if(item.type==='picture'||item.type==='wallpaper'||item.type==='gallery-picture'){$slide.removeClass(config.videoSlideClass);if(forceUpdate||item.type!==slideType){if(item.type!=='gallery-picture'&&$slide.hasClass(config.gallerySlideClass)){$slide.removeClass(config.gallerySlideClass);}
$newSlide=this.$imageSlide.clone();$newSlide.find('img').attr('src',config.emptyImageSrc).attr('alt',item.title);$slide.empty();this.appendNewSlideContent($slide,$newSlide);$slide.data('type',item.type);}else{$slide.find('img').attr('src',config.emptyImageSrc).attr('alt',item.title);}
imgSrc=this.getAdoptedImage(item);window.setTimeout(function(){$slide.find('img').attr('src',imgSrc);},0);}
this.activated=true;return $slide;},getSpinnerOptions:function(){var spinnerOpts=this.config.spinnerOptions;if(browserDetection.mobile){return spinnerOpts.mobile;}else if(CSSUtils.isDesktopUnder1100()){return spinnerOpts.small_desktops;}else{return spinnerOpts.big_desktop;}},convertTypesForMinislider:function(item){var itemsList=item.list,newList=[];if(item===undefined){return;}
if(!item.converted){$.each(itemsList,function(index,minisliderItem){if(minisliderItem===undefined){return;}
if(minisliderItem.type==='picture'){minisliderItem.type='gallery-picture';}else if(minisliderItem.type==='video'){minisliderItem.type='gallery-video'}
newList.push(minisliderItem);});item.list=newList;item.converted=true;}
return item.list;},getAdoptedImage:function(item){var resultImage;if(CSSUtils.isMobileView()){resultImage=item.small_popup_src;}else if(CSSUtils.isGeneralTabletView()){resultImage=item.med_popup_src;}else if(CSSUtils.isSmallDesktopView()&&CSSUtils.isTabletRetina){resultImage=item.med_popup_src;}else{resultImage=item.popup_src;}
return resultImage;},bindOpenEmbeddedVideoHandler:function($slide,$iframe,videoId){var $videoPlaceholder=$slide.find(config.videoPlaceholderSelector),$playVideo=$slide.find(config.playVideoButtonSelector),$videoThumbnail=$slide.find(config.videoThumbnailSelector);$playVideo.hammer({preventDefault:true}).off('touch tap').on('touch tap',_.bind(function(e){e.preventDefault();e.stopPropagation();$playVideo.hide();$videoThumbnail.fadeOut(config.fadeVideoThumbnailDuration,_.bind(function(){$videoPlaceholder.show().append($iframe);this.updateIframeWithVideoId($videoPlaceholder.find('iframe'),videoId);},this));},this));$playVideo.off('click');CSSUtils.bindPreventClickAndPropagation($playVideo);},appendNewSlideContent:function($slide,$newSlide){var slideEl=$slide[0],$children=$newSlide.children(),docFragment=document.createDocumentFragment();$children.each(function(){docFragment.appendChild(this);});slideEl.appendChild(docFragment);}};module.exports=Slide;}),"slider":(function(require,exports,module){var MobileSlidePositionManager=require('mobile_slide_position_manager'),MobileGestures=require('mobile_gestures'),CSSUtils=require('css_utils'),DataManager=require('data_manager'),templatesModule=require('templates'),Slide=require('slide_type'),Gallery=require('gallery'),browserDetection=require('browsers_detection'),Modernizr=require('Modernizr'),keyCodes=require('key_codes'),purl=require('purl');var EXPONENT=6,MULTIPLIER=Math.pow(10,EXPONENT),RESIZE_DEBOUNCE_INTERVAL=200,TAP_DEBOUNCE_INTERVAL=100,MIN_ZOOM=1,MAX_ZOOM=6,MOBILE_CONTENT_UPDATE=1600,DESKTOP_CONTENT_UPDATE=900,MOBILE_ACTIVATION_CONTROLS_TIMEOUT=1700,DESKTOP_ACTIVATION_CONTROLS_TIMEOUT=1150;var defaultConfig={prevBtnClass:'js-overlay_control-prev',nextBtnClass:'js-overlay_control-next',mediaListSelector:'.js-media-list',mediaItemSelector:'.js-media-item',sliderSelector:'.js-slider',currentSlideSelector:'.js-current',clickMaxDistance:10,swipeMinDistance:100,measuringDivSelector:'#mes',animationClass:'wgslider-slide-animation',contentUpdateDelay:MOBILE_CONTENT_UPDATE,emptyImageSrc:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',slideChangeAnimationDuration:400,activationControlsTimeout:MOBILE_ACTIVATION_CONTROLS_TIMEOUT,returnToCurrentPositionDelay:50,sliderOverlaySelector:'.js-slider-overlay',closeControlSelector:'.js-slider-close',headerSelector:'.js-slider-header',footerSelector:'.js-slider-footer',shareContainerSelector:'.js-share',deactivatingControlsClass:'wgslider-deactivating-controls',deactivatedControlsClass:'wgslider-deactivated-controls',titleSelector:'.js-slider-title',dateSelector:'.js-slider-date',downloadPanelSelector:'.js-slider-download',downloadMobileButtonSelector:'.js-download-mobile-btn',downloadOtherSelectSelector:'.js-download-other-select',downloadDropdownSelector:'.js-download-dropdown',downloadDropdownListSelector:'.js-download-dropdown-list',downloadDropdownItemSelector:'.js-download-dropdown-item',shareSelector:'.js-share',gallerySelector:'.js-slider-gallery'};var defaultOptions={translations:{types:{}},getCurrentItemByAjaxLink:'',spinnerSlideItem:{type:'spinner',title:'',created_date:''},useGallery:true,updateUrl:true,firstLoadByUrl:false};var helpers={title:function(item){this.$title.text(item.title);},date:function(item){this.$dateContainer.datetime({'style':'relative','HM':false,'timestamp':item.created_date});this.$date.text(this.$dateContainer.text()+' / '+this.getCategoryTitle(item));},download:function(){this.$downloadPanel.show();},gallery:function(item,currentSlide){this.gallery.activate(item,currentSlide);},wallpaper:function(item){this.$downloadPanel.show();this.adoptScreenSizesToViewport();this.$downloadSelect.on('click.wgslider',_.bind(function(e){e.preventDefault();this.$downloadDropdown.toggle();this.$dropdownList.mCustomScrollbar('update');},this));},resetSpecialHelpers:function(){this.$downloadPanel.hide();if(this.options.useGallery){this.gallery.deactivate();}
if(this.hidedForLoader&&this.isFooterAndHeaderHidden){this.$sliderHeader.fadeIn();this.$share.fadeIn();}},share:function(item){var config;$('.js-share').replaceWith($('<div class="mediapopup_share js-share"></div>'));config=$.extend(true,{},window.yaShareWidgetConfig,{element:$('.js-share')[0],image:this.currentSlide.getSlideImage(item),description:item.description,link:window.location.href,title:item.title+' '+document.title});config.hl=config.l10n;if(window.Ya&&window.Ya.share){window.yaShareInstance=new window.Ya.share(config);}
if(this.isFooterAndHeaderHidden){this.$share.fadeIn();}},hideHeaderFooter:function(){if(!this.isFooterAndHeaderHidden){this.$sliderHeader.fadeOut();this.$share.fadeOut();}
this.hidedForLoader=true;},hideShare:function(){if(!this.isFooterAndHeaderHidden){this.$share.fadeOut();}},showSpinner:function(item){},updateUrl:function(item){var link=item.link;if(!this.ignoreHistoryUpdate&&this.options.updateUrl){if(window.history&&window.history.pushState!==undefined){window.history.pushState(item,item.title,link);}
this.ignoreHistoryUpdate=undefined;}}};var slideTypes={spinner:['resetSpecialHelpers','hideShare','updateUrl'],picture:['resetSpecialHelpers','title','date','share','updateUrl'],video:['resetSpecialHelpers','title','date','share','updateUrl'],wallpaper:['resetSpecialHelpers','title','date','wallpaper','share','updateUrl'],gallery:['resetSpecialHelpers','title','date','gallery','share','updateUrl']};var WgMobile=function(options){var $this=this;this.config=defaultConfig;this.options=$.extend(true,{},defaultOptions,options);this.sliderReady=false;this.activated=false;this.initDataManager(function(){$this.init();});};WgMobile.prototype={init:function(){this.$body=$('body');this.$window=$(window);this.$html=$('html');this.$overlay=$('body').find(this.config.sliderOverlaySelector);this.controls=[];CSSUtils.bindOrientaionChangeToResize(this.$window);this.adaptationToDevices();this.deferredItems=[];if(this.options.useGallery){this.initGallery();}
this.initHelpers(helpers);this.setTypes(slideTypes);this.initControls();this.initSlider();this.bindHandlers();this.initAcceleration();if(this.options.firstLoadByUrl){this.checkUrlForItem();}
this.sliderReady=true;this.$slider.trigger('sliderready');this.isFooterAndHeaderHidden=false;},adaptationToDevices:function(){var isDesktop=!browserDetection.mobile;if(isDesktop){this.config.contentUpdateDelay=DESKTOP_CONTENT_UPDATE;this.config.activationControlsTimeout=DESKTOP_ACTIVATION_CONTROLS_TIMEOUT;}},initAcceleration:function(){var accelerationClass='wgslider-webkit-acceleration';if(this.doCss3dTrans()){this.accelerationElements=[this.$overlay,this.$nextControl,this.$prevControl,this.$sliderHeader,this.$sliderFooter,this.$slides];$.each(this.accelerationElements,function(i,$element){$element.addClass(accelerationClass);});}},checkUrlForItem:function(){var url,itemId,tempItem,tempalteLink,getJSONLink;if(purl===undefined){console.error('purl library is not loaded.');return;}
url=purl();itemId=url.param('item');tempItem=$.extend({},this.options.spinnerSlideItem,{id:itemId});tempalteLink=this.options.getCurrentItemByAjaxLink;getJSONLink=tempalteLink.substring(0,tempalteLink.length-2)+itemId+'/';if(itemId!==undefined){this.showOverlay();this.initSliderManager();if(this.dataManager.getItemById(itemId)===undefined){this.spinnerTimeout=setTimeout(_.bind(function(){this.dataManager.addData({list:[tempItem]},true);this.activate(itemId);},this),500);$.ajax({url:getJSONLink,success:_.bind(function(data){var item;if(data&&data.data){item=data.data;clearTimeout(this.spinnerTimeout);if(!this.activated){this.dataManager.addData({list:[item]},true);this.activate(item.id);}else{this.updateItem(item);this.dataManager.updateItem(item);}}else{setTimeout(_.bind(this.deactivate,this),1000);}},this),error:_.bind(function(){setTimeout(_.bind(this.deactivate,this),1000);},this),dataType:'json'});}else{this.activate(itemId);}}},isWideDesktopView:function(){return!Modernizr.mq('all and (max-width: 1099px)');},updateItem:function(item){$.each(this.slides,function(i,slide){if(parseInt(slide.item.id,10)===parseInt(item.id,10)){slide.activated=false;slide.activate(item,true);}});},initOverlay:function(){var config=this.config,$overlay;$overlay=this.$body.find(config.sliderOverlaySelector);this.$overlay=$overlay;this.$mediaList=$(config.mediaListSelector);this.$mediaItems=this.$mediaList.children();this.$mediaItems.on('click',function(e){var $item=$(this),id=$item.data('id'),categoryItems,filteredItems=[];e.preventDefault();e.stopPropagation();$overlay.show();categoryItems=$item.parent().children(':visible');categoryItems.each(function(){var $curItem=$(this);filteredItems.push($curItem.data('id'));});window.mobileSliderInstance.dataManager.filterItems(filteredItems);window.mobileSliderInstance.activate(id);});this.$sliderHeader=$overlay.find(config.headerSelector);this.$sliderFooter=$overlay.find(config.footerSelector);},activate:function(id,ignoreHistoryUpdate){this.blockInsertion=true;if(id!==undefined){window.wgsliderCurrentItem=id;}
if(this.iOSInterval!==undefined){clearTimeout(this.iOSInterval);}
this.iOSInterval=undefined;if(navigator.userAgent.match(/(iPad|iPhone|iPod);.*CPU.*OS 7_\d/i)){this.iOSInterval=setInterval(function(){window.scrollTo(0,0);},400);}
this.showOverlay();this.originalPageUrl=this.getPageUrl(purl());this.initSliderManager();this.loadCurrent(id,true,ignoreHistoryUpdate);this.toggleMobileHeaderFooter(true);this.$body.hammer({preventDefault:true}).on({'drag':function(e){if(e&&e.gesture){e.gesture.preventDefault();}},'gesture':function(e){if(e&&e.gesture&&e.gesture.touches.length>1){e.gesture.preventDefault();}}});this.blockInsertion=false;this.isFooterAndHeaderHidden=false;if(this.gestures===undefined){this.initGestures();}
this.activated=true;},showOverlay:function(){this.bodyScrollTop=this.getPageScroll();this.$overlay.show();this.$slider.css('visibility','visible');this.$html.addClass('overlay-open');},getPageScroll:function(){var top=window.pageYOffset||document.documentElement.scrollTop;return top;},initSliderManager:function(){this.currentOffset=0;this.sliderWrapWidth=this.currentSlide.getElement().outerWidth();if(this.sliderManager===undefined){this.sliderManager=new MobileSlidePositionManager.SlidePositionManager(this.$slides,{width:this.sliderWrapWidth,animationClass:this.config.animationClass});}else{this.sliderManager.updatePosition(this.sliderWrapWidth);}
this.sliderManager.offsetSlideItems(0,{animating:false});},deactivate:function(ignoreHistoryUpdate){this.$slider.trigger('sliderdeactivating',{item:this.dataManager.getCurrentItem()});this.zoomOut();if(this.iOSInterval!==undefined){clearInterval(this.iOSInterval);}
this.currentSlide.deactivate();this.updatePageUrl({link:this.originalPageUrl},ignoreHistoryUpdate);this.$body.hammer({preventDefault:false}).off('drag gesture');this.$slider.trigger('sliderclose');this.activated=false;},getPageUrl:function(purl){var path=purl.attr('path'),page=purl.param('page'),originalUrl;if(page!==undefined){originalUrl=path+'?page='+page;}else{originalUrl=path;}
return originalUrl;},initGestures:function(){var $target=this.$slider.parent();this.gestures=new MobileGestures($target,{$body:this.body})},initControls:function(){var config=this.config,$overlay=this.$overlay;this.$closeOverlay=$overlay.find(config.closeControlSelector);this.$nextControl=$overlay.find('.'+config.nextBtnClass);this.$prevControl=$overlay.find('.'+config.prevBtnClass);this.$share=$overlay.find('.mediapopup_panel__social');this.activatingTimeout=0;this.controls=[this.$title,this.$date,this.$share];if(this.options.useGallery){this.controls.push(this.$gallery);}
$.each(this.controls,function(i,control){control.addClass('wgslider-controls')});},toggleMobileHeaderFooter:function(isShow){if(!this.blockToggle){if(isShow!==undefined){this.isFooterAndHeaderHidden=isShow;}else{this.isFooterAndHeaderHidden=!this.isFooterAndHeaderHidden;}
if(this.isFooterAndHeaderHidden){this.$sliderHeader.fadeIn();this.$share.addClass('no-transition').fadeIn();this.$closeOverlay.fadeIn();}else{this.$sliderHeader.fadeOut();this.$share.addClass('no-transition').fadeOut();this.$closeOverlay.fadeOut();}}},initGallery:function(){var $overlay=this.$overlay;this.$gallery=$overlay.find(this.config.gallerySelector);this.gallery=new Gallery(this.$gallery);this.$gallery.on('updateslide',_.bind(function(e,item){if(!this.isWideDesktopView()){this.toggleMobileHeaderFooter(false);}
this.currentSlide.activated=false;this.currentSlide.activate(item);},this));},initWallpaperHelperElements:function(){var config=this.config,$downloadPanel=this.$overlay.find(config.downloadPanelSelector);this.$downloadPanel=$downloadPanel;this.$downloadSelect=$downloadPanel.find(config.downloadOtherSelectSelector);this.$downloadDropdown=$downloadPanel.find(config.downloadDropdownSelector);this.$dropdownList=this.$downloadDropdown.find(config.downloadDropdownListSelector);},initHelpers:function(helpers){var $overlay=this.$overlay,config=this.config
this.$sliderHeader=$overlay.find(config.headerSelector);this.$sliderFooter=$overlay.find(config.footerSelector);this.$title=$overlay.find(config.titleSelector);this.$dateContainer=$('<span></span>').hide().appendTo('body');this.$date=$overlay.find(config.dateSelector);this.initWallpaperHelperElements();this.helpers=helpers;},setTypes:function(types){this.types=types;},getTypes:function(){return this.types;},reassignType:function(type){this.types=$.extend({},this.types,type);},adoptScreenSizesToViewport:function(){},getCategoryTitle:function(item){return item.category_title;},deactivateControls:function(){var config=this.config;$.each(this.controls,function(index,control){control.addClass(config.deactivatingControlsClass);});if(!this.isWideDesktopView()){this.toggleMobileHeaderFooter(false);}
this.delayedActivateControls();},activateControls:function(){var $this=this;$.each(this.controls,function(index,$control){$control.removeClass($this.config.deactivatingControlsClass);});},delayedActivateControls:function(){var $this=this;clearTimeout(this.activatingTimeout);this.activatingTimeout=setTimeout(function(){$this.activateControls();$this.blockInsertion=false;},this.config.activationControlsTimeout);},moveSlide:function(offset){this.deactivateControls();this.sliderManager.offsetSlideItems(offset);},getCurrentTransformOffset:function(){return this.currentOffset;},initSlider:function(){var $slide=this.getSlideElement(),config=this.config,$slider,$prevSlide,$nextSlide,$currentSlide;$slider=$(config.sliderSelector);this.blockInsertion=true;$slider.css('visibility','hidden');this.$slider=$slider;$currentSlide=$slide.clone().appendTo($slider);$prevSlide=$slide.clone().insertBefore($currentSlide);$nextSlide=$slide.clone().insertAfter($currentSlide);this.$slides=this.$slider.children();this.prevSlide=new Slide($prevSlide);this.nextSlide=new Slide($nextSlide);this.currentSlide=new Slide($currentSlide);this.slides=[this.prevSlide,this.currentSlide,this.nextSlide];this.pinchState={x:0,y:0,scale:1,initialized:false,activated:false};this.blockInsertion=false;},getSlideElement:function(){var config=this.config,$pictureSlide;$pictureSlide=$(templatesModule.getTemplate('picture_slide')({popup_src:config.emptyImageSrc}));return $pictureSlide;},loadCurrent:function(id,forceUpdate,ignoreHistoryUpdate){var currentItem;if(id===undefined){id=window.wgsliderCurrentItem;}
this.dataManager.setCurrentIndex({id:id});currentItem=this.dataManager.getCurrentItem();this.currentSlide.setItem(currentItem,forceUpdate);this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.applyHelpers(this.currentSlide,currentItem,true);this.$nextControl.show();this.$prevControl.show();this.$slides.css('visibility','visible');this.preloadPrev();this.preloadNext();},loadDeferredItems:function(){var items=this.deferredItems,dataManager=this.dataManager,$this=this,img,neighborId,neighborIndex,curItemId,curItem,i,len,$slideEl,loadItem;loadItem=function(item){$slideEl=item.slide.getElement();img=$slideEl.find('img');if(item.direction==='next'){neighborId=$slideEl.next().data('itemId');neighborIndex=dataManager.searchIndexById(neighborId);curItemId=dataManager.getIdByIndex(neighborIndex-1);}else if(item.direction==='prev'){neighborId=$slideEl.prev().data('itemId');neighborIndex=dataManager.searchIndexById(neighborId);curItemId=dataManager.getIdByIndex(neighborIndex+1);}
curItem=dataManager.getItemById(curItemId);if(curItem!==undefined&&curItem.thumb_src!==undefined){item.slide.setItem(curItem);$this.applyHelpers($slideEl,curItem);}};for(i=0,len=items.length;i<len;i++){loadItem(items[i]);}
this.deferredItems=[];},preloadByIndex:function(index){var slide,item;if(index===-1){slide=this.prevSlide;item=this.dataManager.getPrevItem();if(item===undefined){this.$prevControl.hide();this.prevSlide.getElement().css('visibility','hidden');}}else if(index===1){slide=this.nextSlide;item=this.dataManager.getNextItem();if(item===undefined){this.$nextControl.hide();this.nextSlide.getElement().css('visibility','hidden');}}
if(item!==undefined&&item.id==='loading'){item.direction=(index===1)?'prev':'next';item.slide=slide;this.deferredItems.push(item);}
slide.setItem(item);},preloadPrev:function(){this.preloadByIndex(-1);},preloadNext:function(){this.preloadByIndex(1);},initDataManager:function(readyCallback){var dataManager,$this=this,data=window.sliderData||{list:[]};dataManager=new DataManager(data,{onReadyHandler:function(){if(typeof readyCallback==='function'){readyCallback.call($this);}}});dataManager.onRebuildIndexHandler=function(){$this.loadDeferredItems();};this.dataManager=dataManager;},setData:function(data){this.dataManager.setData(data);},bindHandlers:function(){var self=this;this.$closeOverlay.hammer().on('touch click',function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.deactivate();});this.$body.on('keydown',function(e){switch(e.which){case keyCodes.ESCAPE:self.deactivate();break;case keyCodes.RIGHT:case keyCodes.DOWN:case keyCodes.SPACE:case keyCodes.PAGE_DOWN:self.goToNextItemHandler();break;case keyCodes.LEFT:case keyCodes.UP:case keyCodes.PAGE_UP:self.goToPrevItemHandler();break;}});CSSUtils.bindPreventClickAndPropagation(this.$closeOverlay);this.$nextControl.hammer({preventDefault:true}).on({'tap':function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.goToNextItemHandler();}});this.$prevControl.hammer().on({'tap':function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.goToPrevItemHandler();}});CSSUtils.bindPreventClickAndPropagation(this.$prevControl);CSSUtils.bindPreventClickAndPropagation(this.$nextControl);this.$overlay.on({'customswipeleft.swipebox':function(e){self.goToPrevItemHandler();},'customswiperight.swipebox':function(e){self.goToNextItemHandler();},'customswipeincomplete.swipebox':function(){self.returnToCurrentPosition();self.delayedActivateControls();},'customswipemovetrack.swipebox':function(e,distance){if(!self.blockInsertion){self.moveSlide(distance);}}});this.$overlay.hammer({preventDefault:true}).on({'doubletap':_.bind(function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);clearTimeout(self.toggleHFTimeout);self.blockToggle=true;clearTimeout(self.blockToggleTimout);if(!this.isWideDesktopView()){this.zoomIn();}},this),'pinch':_.bind(function(e){self.pinchState.pinching=true;this.scaleImage(e);clearTimeout(self.pinchTimeout);},this),'transformstart':function(){self.pinchState.pinching=true;self.blockToggle=true;clearTimeout(self.blockToggleTimout);clearTimeout(self.toggleHFTimeout);if(self.pinchState===undefined||!self.pinchState.initialized){self.initZoom(self.currentSlide.getElement().find('img'));}},'transformend':function(e){if(self.pinchState.initialized){self.initMovePictureInZoom();self.setScale(self.pinchState.curScale,true);self.checkForDefaultScale(self.pinchState.scale);}
self.pinchTimeout=setTimeout(function(){self.pinchState.pinching=false;},300);}});if(!this.isWideDesktopView()){this.$slides.hammer({behavior:{touchCallout:'default'}}).on('tap',function(e){self.toggleHeaderFooterHandler();});}
this.$window.on({'resize':_.debounce(function(){if(self.activated){self.sliderWrapWidth=self.currentSlide.getElement().outerWidth();self.sliderManager.updatePosition(self.sliderWrapWidth,{animating:false});if(!self.isWideDesktopView()){self.$slides.hammer().off('tap');self.$slides.hammer().on('tap',_.debounce(function(e){self.toggleHeaderFooterHandler();},TAP_DEBOUNCE_INTERVAL));}else{self.$slides.hammer().off('tap');self.toggleMobileHeaderFooter(true);}}},RESIZE_DEBOUNCE_INTERVAL),'popstate':function(e){var item=e&&e.originalEvent&&e.originalEvent.state;if(!item){return;}
if(self.activated&&(self.prevSlide.item.id===item.id)){self.goToPrevItemHandler(true);}else if(self.activated&&self.nextSlide.item.id===item.id){self.goToNextItemHandler(true);}else if(self.activated&&(self.currentSlide.item.id===item.id)){return;}else if(self.activated){self.deactivate(true);}else if(!self.activated){self.activate(item&&item.id,true);}}});},toggleHeaderFooterHandler:function(){var self=this;clearTimeout(self.toggleHFTimeout);if(!self.pinchState.pinching){self.toggleHFTimeout=setTimeout(function(){self.toggleMobileHeaderFooter();},400);}},scaleImage:function(e,isSave){var curScale,oldScale,resultScale;if(this.currentSlide.item.type==='picture'){curScale=e.gesture.scale;oldScale=this.pinchState.scale||1;resultScale=curScale*oldScale;this.pinchState.curScale=resultScale;this.setScale(resultScale,isSave);}},initZoom:function($img,scale){var self=this,defaultState={x:0,y:0,scale:1,initialized:false,activated:false};if($img===undefined){$img=this.currentSlide.getElement().find('img');}
defaultState.$img=$img;this.pinchState=$.extend({},defaultState,this.pinchState);this.pinchState.scale=scale||1;if(!this.pinchState.initialized&&this.currentSlide.item.type==='picture'){this.pinchState.initialized=true;this.gestures.deactivate();clearTimeout(self.toggleHFTimeout);this.toggleMobileHeaderFooter(false);self.blockToggle=true;clearTimeout(self.blockToggleTimout);self.blockToggleTimout=setTimeout(function(){self.blockToggle=false;},800);if(!this.pinchState.pinching){this.initMovePictureInZoom();}}
if(this.currentSlide.item.type!=='picture'){this.pinchState.$img=undefined;}
this.setScale(this.pinchState.scale);},initMovePictureInZoom:function(){var $img=this.pinchState.$img,self=this;var setTransform=function(x,y){var state=self.pinchState,css=CSSUtils.getMatrix3d({x:state.x+x,y:state.y+y,scale:state.scale});if(!self.pinchState.pinching){state.$img.css(css);}};if($img===undefined){$img=this.currentSlide.getElement().find('img');this.pinchState.$img=$img;}
clearTimeout(self.toggleHFTimeout);this.toggleMobileHeaderFooter(false);$img.hammer({behavior:{touchCallout:'default'}}).on({'dragstart':function(e){e.preventDefault();e.stopPropagation();if(e.gesture.touches.length>1){return undefined;}
if(e.gesture){e.gesture.preventDefault();}
if(!self.pinchState.activated){self.pinchState.activated=true;self.pinchState.$img.hammer().on('drag',function(e){setTransform(e.gesture.deltaX,e.gesture.deltaY);});self.pinchState.$img.hammer().on('dragend',function(e){var state=self.pinchState;if(!self.pinchState.pinching){self.pinchState=$.extend(state,{x:state.x+e.gesture.deltaX,y:state.y+e.gesture.deltaY});}
if(self.pinchState!==undefined){self.pinchState.activated=false;if(self.pinchState.$img!==undefined&&self.pinchState.$img.length>0){self.pinchState.$img.hammer().off('drag dragend');}}});}},'doubletap':function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.zoomOut(self.pinchState.$img);}});},zoomIn:function(){var $img;clearTimeout(self.toggleHFTimeout);if(this.currentSlide.item.type==='picture'){$img=this.currentSlide.getElement().find('img');this.initZoom($img,2);}},zoomOut:function($img){if(this.pinchState===undefined){return undefined;}
if(this.pinchState.initialized){this.pinchState.x=0;this.pinchState.y=0;this.setScale(1);this.switchOffPinching($img);}},checkForDefaultScale:function(scale){if(scale===MIN_ZOOM){this.pinchState.x=0;this.pinchState.y=0;this.setScale(scale);this.switchOffPinching(this.pinchState.$img);}},switchOffPinching:function($img){var $img=$img||this.pinchState.$img,self=this;this.pinchState.initialized=false;this.pinchState.activated=false;this.pinchState.$img=undefined;clearTimeout(self.toggleHFTimeout);clearTimeout(self.blockToggleTimout);self.blockToggle=true;self.blockToggleTimout=setTimeout(function(){self.blockToggle=false;},800);$img.hammer().off('dragstart doubletap');this.gestures.activate();},setScale:function(scale,isSave){var css,defaultValue={scale:1,x:0,y:0},state=this.pinchState;if(isSave){scale=Math.max(MIN_ZOOM,Math.min(this.pinchState.curScale,MAX_ZOOM));this.pinchState.scale=scale;if(scale===MIN_ZOOM){state.x=0;state.y=0;}}
var value=$.extend({},defaultValue,{scale:scale,x:state.x,y:state.y});css=CSSUtils.getMatrix3d(value);state&&state.$img&&state.$img.css(css);},goToNextItemHandler:function(ignoreHistoryUpdate){this.zoomOut();if(!this.blockInsertion){this.deactivateControls();this.nextItem(ignoreHistoryUpdate);}},goToPrevItemHandler:function(ignoreHistoryUpdate){this.zoomOut();if(!this.blockInsertion){this.deactivateControls();this.prevItem(ignoreHistoryUpdate);}},nextItem:function(ignoreHistoryUpdate){var $this=this,dataManager=this.dataManager,tempSlide,$prevControl=this.$prevControl,notLast=dataManager.getCurrentIndex()!==(dataManager.itemsIndex.length-1);if(!this.blockInsertion&&notLast){dataManager.next();this.blockInsertion=true;tempSlide=this.prevSlide;this.prevSlide=this.currentSlide;this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.setCurrentSlide(this.nextSlide);this.nextSlide=tempSlide;if(!$prevControl.is(':visible')){$prevControl.show();if(this.nextSlide.getElement().css('visibility')==='hidden'){this.nextSlide.getElement().css('visibility','visible');}}
if(dataManager.getNextItem()===undefined){this.$nextControl.hide();this.nextSlide.getElement().css('visible','hidden');}
this.currentSlide.reset();this.prevSlide.deactivate();this.$slides.addClass(this.config.animationClass);this.sliderManager.moveForward(function(){$this.preloadNext();$this.blockInsertion=false;});}else{setTimeout(function(){$this.returnToCurrentPosition();},this.config.returnToCurrentPositionDelay);}},updatePageUrl:function(item){var link=item.link;if(window.history&&window.history.pushState!==undefined){window.history.pushState(item,item.title,link);}},prevItem:function(ignoreHistoryUpdate){var $this=this,dataManager=this.dataManager,$nextControl=this.$nextControl,tempSlide;if(!this.blockInsertion&&dataManager.getCurrentIndex()!==0){dataManager.prev();this.blockInsertion=true;tempSlide=this.nextSlide;this.nextSlide=this.currentSlide;this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.setCurrentSlide(this.prevSlide);this.prevSlide=tempSlide;if(dataManager.getCurrentIndex()===0&&this.$prevControl.is(':visible')){this.$prevControl.hide();this.prevSlide.getElement().css('visibility','hidden');}
if(!$nextControl.is(':visible')){$nextControl.show();if(this.prevSlide.getElement().css('visibility')==='hidden'){this.prevSlide.getElement().css('visibility','visible');}}
this.currentSlide.reset();this.nextSlide.deactivate();this.$slides.addClass(this.config.animationClass);this.sliderManager.moveBack(function(){$this.preloadPrev();$this.blockInsertion=false;});}else{setTimeout(function(){$this.returnToCurrentPosition();},this.config.returnToCurrentPositionDelay);}},applyHelpers:function($slide,item,immediately){var type=item&&item.type,$this=this,types=this.types,helpers=this.helpers;if(item===undefined){return;}
if(type!==undefined&&types[type.toLowerCase()]!==undefined){window.clearTimeout(this.contentUpdateDelay);this.contentUpdateDelay=window.setTimeout(function(){$this.activateControls();$.each(types[type.toLowerCase()],function(index,helper){helpers[helper].call($this,item);});},immediately?0:this.config.contentUpdateDelay);}},setCurrentSlide:function(slide){var curItem=this.dataManager.getCurrentItem();this.currentSlide=slide;this.applyHelpers(slide.getElement(),curItem);return slide;},getNextSlide:function(){return this.nextSlide.getElement();},getPrevSlide:function(){return this.prevSlide.getElement();},returnToCurrentPosition:function(){this.$slides.addClass(this.config.animationClass);this.sliderManager.offsetSlideItems(0,{animating:true});},doCss3dTrans:function(){return CSSUtils.detectSupport3dTransition();},getUID:function(){return Math.floor(Math.random()*MULTIPLIER);}};var init=function(options){if(window.initMobileSlider){window.mobileSliderInstance=new WgMobile(options);}};module.exports={init:init,MobileSlider:WgMobile};}),"templates":(function(require,exports,module){var $=require('jQuery'),window=require('window'),document=require('document'),_=require('_'),compiledTemplates=require('compiled_templates');var templates={};function isTemlatesFound(){var prop,ho=Object.prototype.hasOwnProperty;for(prop in templates){if(ho.call(templates,prop)){return true;}}
return false;}
function initTemplatesInDom(){$('template').each(function(i,el){var $el=$(el),template=$el.html(),id=$el.attr('id');templates[id]=_.template(template);});};function initCompiledTemplates(){_.map(_.keys(compiledTemplates),function(compiledTemplateUrl){var compiledTemplate=compiledTemplates[compiledTemplateUrl],idRegExp=/templates\/(.*)\.html/g,id=idRegExp.exec(compiledTemplateUrl)[1];if(id!==undefined||id!==null){templates[id]=compiledTemplate;}else{console.error('error finding id for template ',compiledTemplateUrl);}});}
function getTemplates(){if(!isTemlatesFound()){if(compiledTemplates===undefined){initTemplatesInDom();}else{initCompiledTemplates();}}
return templates;}
function getTemplate(id){if(!isTemlatesFound()){getTemplates();}
return templates[id];}
module.exports={'getTemplates':getTemplates,'getTemplate':getTemplate};}),"compiled_templates":(function(require){this["JST"]=this["JST"]||{};this["JST"]["src/templates/overlay.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<div class="overlay js-slider-overlay" style="display: none;" id>\n    <div class="overlay_wrapper">\n        <div class="overlay_horizontal">\n            <div class="overlay_vertical">\n                <div class="mediapopup">\n                    <ul class="mediapopup_slider js-slider">\n\n                    </ul>\n                    <div class="mediapopup_header js-slider-header">\n                        <div class="mediapopup_panel">\n                            <h1 class="mediapopup_heading js-slider-title"></h1>\n                            <span class="mediapopup_date js-slider-date"></span>\n                        </div>\n                    </div>\n                    <div class="mediapopup_footer js-slider-footer">\n                        <div class="minislider js-slider-gallery" style="display: none;">\n                            <ul class="minislider_list js-gallery-list" style="position: relative;">\n\n                            </ul>\n                            <a href="" class="minislider_control js-gallery-control-prev">prev</a>\n                            <a href="" class="minislider_control minislider_control__right js-gallery-control-next">Next</a>\n                        </div>\n                        <div class="mediapopup_panel mediapopup_panel__social ">\n                            <div class="media-download js-slider-download" style="display: none;">\n                                <div class="media-download_btn js-download-mobile-btn" style="display: none;">\n                                    <button class="form-button">Download<span class="form-button_txt"> wallpaper</span></button>\n                                </div>\n                                <ul class="media-download_list">\n                                    <li class="media-download_item media-download_item__txt">\n                                        <span class="media-download_txt">Download</span>\n                                        <span class="media-download_info">open in new window</span>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1024768</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">12801024</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1366768</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">19201080</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link"> </a>\n                                    </li>\n                                    <li class="media-download_item media-download_item__dropdown js-download-other-select">\n                                        <a href="" class="link-fake"> </a>\n                                        <div class="dropdown js-download-dropdown" style="display: none; left: 2px;">\n                                            <ul class="link-list js-download-dropdown-list">\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1024x600</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1280x720</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1280x960</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1360x7680</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1440x900</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1600x900</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1600x1200</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1680x1050</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1920x1080</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1920x1200</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1024x600</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1280x720</a>\n                                                </li>\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href="">1280x960</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="mediapopup_share js-share">\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <a href="" class="overlay_control js-overlay_control-prev">Prev</a>\n        <a href="" class="overlay_control overlay_control__right js-overlay_control-next">Next</a>\n    </div>\n    <a href="" class="mediapopup-close js-slider-close">\n        <span class="mediapopup-close_ico">Close</span>\n    </a>\n</div>';}
return __p};this["JST"]["src/templates/picture_minislide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="minislider_item">\n    <img class="minislider_img" src="" alt="" draggable="false">\n</li>';}
return __p};this["JST"]["src/templates/picture_slide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="mediapopup_slide" data-type="picture">\n    <img class="mediapopup_item mediapopup_item__img js-picture-image"\n         src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" draggable="false">\n</li>\n';}
return __p};this["JST"]["src/templates/video_minislide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="minislider_item">\n    <img class="minislider_img" src="" alt="" draggable="false">\n    <span class="play-ico">Play</span>\n</li>';}
return __p};this["JST"]["src/templates/video_slide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<template id="video_slide">\n    <li class="mediapopup_slide" data-type="video">\n        <div class="mediapopup_item mediapopup_item__video js-video-placeholder" style="display: none;">\n            <iframe id="ytplayer" type="text/html" width="100%" height="100%" src="" frameborder="0" frameborder="0" allowfullscreen ></iframe>\n        </div>\n        <img class="mediapopup_item mediapopup_item__trumbnail js-video-thumbnail" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" draggable="false">\n        <a class="play-ico play-ico__popup js-video-play">Play</a>\n    </li>\n</template>';}
return __p};return JST;}),"purl":(function(require,exports,module){;(function(factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports=='object'){module.exports=factory();}else{window.purl=factory();}})(function(){var tag2attr={a:'href',img:'src',form:'action',base:'href',script:'src',iframe:'src',link:'href'},key=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','fragment'],aliases={'anchor':'fragment'},parser={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},isint=/^[0-9]+$/;function parseUri(url,strictMode){var str=decodeURI(url),res=parser[strictMode||false?'strict':'loose'].exec(str),uri={attr:{},param:{},seg:{}},i=14;while(i--){uri.attr[key[i]]=res[i]||'';}
uri.param['query']=parseString(uri.attr['query']);uri.param['fragment']=parseString(uri.attr['fragment']);uri.seg['path']=uri.attr.path.replace(/^\/+|\/+$/g,'').split('/');uri.seg['fragment']=uri.attr.fragment.replace(/^\/+|\/+$/g,'').split('/');uri.attr['base']=uri.attr.host?(uri.attr.protocol?uri.attr.protocol+'://'+uri.attr.host:uri.attr.host)+(uri.attr.port?':'+uri.attr.port:''):'';return uri;}
function getAttrName(elm){var tn=elm.tagName;if(typeof tn!=='undefined')return tag2attr[tn.toLowerCase()];return tn;}
function promote(parent,key){if(parent[key].length===0)return parent[key]={};var t={};for(var i in parent[key])t[i]=parent[key][i];parent[key]=t;return t;}
function parse(parts,parent,key,val){var part=parts.shift();if(!part){if(isArray(parent[key])){parent[key].push(val);}else if('object'==typeof parent[key]){parent[key]=val;}else if('undefined'==typeof parent[key]){parent[key]=val;}else{parent[key]=[parent[key],val];}}else{var obj=parent[key]=parent[key]||[];if(']'==part){if(isArray(obj)){if(''!==val)obj.push(val);}else if('object'==typeof obj){obj[keys(obj).length]=val;}else{obj=parent[key]=[parent[key],val];}}else if(~part.indexOf(']')){part=part.substr(0,part.length-1);if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}else{if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}}}
function merge(parent,key,val){if(~key.indexOf(']')){var parts=key.split('[');parse(parts,parent,'base',val);}else{if(!isint.test(key)&&isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t;}
if(key!==''){set(parent.base,key,val);}}
return parent;}
function parseString(str){return reduce(String(str).split(/&|;/),function(ret,pair){try{pair=decodeURIComponent(pair.replace(/\+/g,' '));}catch(e){}
var eql=pair.indexOf('='),brace=lastBraceInKey(pair),key=pair.substr(0,brace||eql),val=pair.substr(brace||eql,pair.length);val=val.substr(val.indexOf('=')+1,val.length);if(key===''){key=pair;val='';}
return merge(ret,key,val);},{base:{}}).base;}
function set(obj,key,val){var v=obj[key];if(typeof v==='undefined'){obj[key]=val;}else if(isArray(v)){v.push(val);}else{obj[key]=[v,val];}}
function lastBraceInKey(str){var len=str.length,brace,c;for(var i=0;i<len;++i){c=str[i];if(']'==c)brace=false;if('['==c)brace=true;if('='==c&&!brace)return i;}}
function reduce(obj,accumulator){var i=0,l=obj.length>>0,curr=arguments[2];while(i<l){if(i in obj)curr=accumulator.call(undefined,curr,obj[i],i,obj);++i;}
return curr;}
function isArray(vArg){return Object.prototype.toString.call(vArg)==="[object Array]";}
function keys(obj){var key_array=[];for(var prop in obj){if(obj.hasOwnProperty(prop))key_array.push(prop);}
return key_array;}
function purl(url,strictMode){if(arguments.length===1&&url===true){strictMode=true;url=undefined;}
strictMode=strictMode||false;url=url||window.location.toString();return{data:parseUri(url,strictMode),attr:function(attr){attr=aliases[attr]||attr;return typeof attr!=='undefined'?this.data.attr[attr]:this.data.attr;},param:function(param){return typeof param!=='undefined'?this.data.param.query[param]:this.data.param.query;},fparam:function(param){return typeof param!=='undefined'?this.data.param.fragment[param]:this.data.param.fragment;},segment:function(seg){if(typeof seg==='undefined'){return this.data.seg.path;}else{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},fsegment:function(seg){if(typeof seg==='undefined'){return this.data.seg.fragment;}else{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}};}
purl.jQuery=function($){if($!=null){$.fn.url=function(strictMode){var url='';if(this.length){url=$(this).attr(getAttrName(this[0]))||'';}
return purl(url,strictMode);};$.url=purl;}};purl.jQuery(window.jQuery);return purl;});}),"spinner":(function(require,exports,module){(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}
if(s[prop]!==undefined)return prop}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
function getColor(color,idx){return typeof color=='string'?color:color[idx%color.length]}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',position:'absolute'}
function Spinner(o){this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width
css(el,{left:o.left,top:o.top})
if(target){target.insertBefore(el,target.firstChild||null)}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(getColor(o.color,i),'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:getColor(o.color,i),opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));})},{},{});var BROWSER_DETECTION_MODULE=(function($,navigator){'use strict';var IOS_REGEXP=/(i(pod|phone|pad)+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i;var matched,browser={};$.uaMatch=function(ua){var match,browserMatch,webkitMatch,mobileMatch,chromeMatch,androidStandartBrowserMatch,windowsPhoneDesktopMatch,macMatch,iosMatch;ua=ua.toLowerCase();match=/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(chromium) ((\d+)?[\w\.]+)/.exec(ua)||/(yabrowser)\/((\d+)?[\w\.]+)/.exec(ua)||/(kindle)\/((\d+)?[\w\.]+)/.exec(ua)||ua.indexOf('compatible')<0&&/(firefox)\/((\d+)?[\w\.-]+)/.exec(ua)||/(iemobile)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)\/.+rv[^\w]+([\w\.]+)/.exec(ua)||/(android)[\/\s-]?([\w\.]+)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(mobile)\/\w+\s(safari)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(safari)/.exec(ua)||/version\/.+?\/\w+\s(safari)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(mozilla)\/((\d+)?[\w\.]+).+gecko/.exec(ua);webkitMatch=/webkit/.exec(ua);mobileMatch=/mobile/.exec(ua);windowsPhoneDesktopMatch=/wpdesktop/.exec(ua);chromeMatch=/(chrome)[ \/]([\w.]+)/.exec(ua);androidStandartBrowserMatch=/(android)[\/\s-]?([\w\.]+).*?version\/([\w\.]+).+?(mobile)*\s+(safari)/.exec(ua);iosMatch=IOS_REGEXP.exec(ua);if(match===null){return{};}
browserMatch={browser:match[1]||'',version:match[2]||'0',mobile:mobileMatch!==null?true:false,webkit:webkitMatch!==null?true:false,ios:(iosMatch!==null&&iosMatch[0]!==undefined)};if(match[1]==='android'){if(chromeMatch!==null&&chromeMatch[1]==='chrome'){browserMatch.browser=chromeMatch[1];browserMatch.version=chromeMatch[2];}else{if(androidStandartBrowserMatch!==null){browserMatch.browser=androidStandartBrowserMatch[5];browserMatch.version=androidStandartBrowserMatch[3];}}
browserMatch.android=true;browserMatch.osVersion=match[2];}else if(match[4]==='safari'){browserMatch.browser=match[4];browserMatch.version=match[1];}else if(match[3]==='safari'){browserMatch.browser=match[3];browserMatch.version=match[1];}else if(browserMatch.browser==='kindle'){browserMatch.mobile=true;}else if(match[1]==='trident'){if(windowsPhoneDesktopMatch!==null){browserMatch.browser='iemobile';browserMatch.mobile=true;}else{browserMatch.browser='msie';}}
return browserMatch;};matched=$.uaMatch(navigator.userAgent);browser=$.extend({},matched);if(matched.browser&&matched.browser!==''){browser[matched.browser]=true;}
if(matched.android){browser.android=true;browser.mobile=true;}
browser.mac=window.navigator&&window.navigator.platform&&window.navigator.platform.toLowerCase().indexOf('mac')!==-1;$.browser=browser;return browser;})(jQuery,navigator);var CSS_UTILS_MODULE=(function($,browserDetection){'use strict';var MIN_BUGGY_ANDROID_VERSION=3.0,MAX_BUGGY_ANDROID_VERSION=4.0,TRANSITION_END_FALLING_TIMEOUT=0.5;var touchEventBugDetectionCache;var CSSUtils={parseCssMatrix:function(string){var m=this,type,parts,i;string=String(string).trim();if(string==='none'){return m;}
type=string.slice(0,string.indexOf('('));if(type==='matrix3d'){parts=string.slice(9,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[1];m.m13=parts[2];m.m14=parts[3];m.m21=m.c=parts[4];m.m22=m.d=parts[5];m.m23=parts[6];m.m24=parts[7];m.m31=parts[8];m.m32=parts[9];m.m33=parts[10];m.m34=parts[11];m.m41=m.e=parts[12];m.m42=m.f=parts[13];m.m43=parts[14];m.m44=parts[15];}else if(type==='matrix'){m.affine=true;parts=string.slice(7,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[2];m.m41=m.e=parts[4];m.m21=m.c=parts[1];m.m22=m.d=parts[3];m.m42=m.f=parts[5];}else{throw new TypeError('Invalid Matrix Value');}
return m;},prefixWrap:function(property,value,vendors,valuePrefixing){var results={},valueOfProp;vendors=vendors||['-webkit-','-moz-','-ms-','-o-',''];valuePrefixing=valuePrefixing||false;$.each(vendors,function(index,vendor){if(!valuePrefixing){valueOfProp=value;}else{valueOfProp=vendor+value;}
results[vendor+property]=valueOfProp;});return results;},getMatrix3d:function(v){var vendors=['-webkit-','-ms-',''],cssValue,translateValue,matrix,matrixToString;if(v.x===undefined){v.x=0;}
if(v.y===undefined){v.y=0;}
if(v.z===undefined){v.z=0;}
if(v.scale===undefined){v.scale=1;}
matrix=[[v.scale,0,0,0],[0,v.scale,0,0],[0,0,v.scale,0],[v.x,v.y,0,1]];matrixToString=function(m){var result=[];$.each(m,function(i,row){result.push(row.join(','));});return'matrix3d('+result.join(',')+')';};translateValue=matrixToString(matrix);cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},whichTransitionEvent:function(){var el=document.createElement('fakeelement'),transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'},transition;for(transition in transitions){if(transitions.hasOwnProperty(transition)&&el.style[transition]!==undefined){return transitions[transition];}}},bindTransitionEnd:function($el,callback,options){var transitionEnd=CSSUtils.whichTransitionEvent();options=$.extend({},{timeout:TRANSITION_END_FALLING_TIMEOUT},options);$el.one(transitionEnd,function(){if(callback!==undefined){window.clearTimeout($el.data('transitionEndTimeout'));callback.call(this);}});$el.data('transitionEndTimeout',window.setTimeout(function(){if(callback!==undefined){$el.off(transitionEnd);callback.call(this);}},options.timeout));},detectSupportTransition:function(){var prefixes='transition WebkitTransition MozTransition '+'OTransition msTransition KhtmlTransition'.split(' '),i,len;for(i=0,len=prefixes.length;i<len;i++){if(document.createElement('div').style[prefixes[i]]!==undefined){return prefixes[i];}}
return false;},detectSupport3dTransition:function(){var isOldOrBuggyAndroid=browserDetection.android&&parseFloat(browserDetection.osVersion)<4.1&&browserDetection.safari,isOldOpera=browserDetection.opera&&parseFloat(browserDetection.version)<13,isOldIE=browserDetection.msie&&parseFloat(browserDetection.version)<10;if(isOldOrBuggyAndroid||isOldOpera||isOldIE){return false;}
return Modernizr.csstransforms3d&&Modernizr.csstransforms&&Modernizr.csstransitions;},detectSupport2dTransition:function(){return Modernizr.csstransforms&&Modernizr.csstransitions;},definePositioningStrategy:function(){if(CSSUtils.detectSupport3dTransition()){return CSSUtils.getPositionIn3d;}else if(CSSUtils.detectSupport2dTransition()){return CSSUtils.getPositionIn2d;}else{return CSSUtils.getPositionWithJquery;}},isTouch:function(){return document.createTouch!==undefined||('ontouchstart'in window)||('onmsgesturechange'in window)||navigator.msMaxTouchPoints;},bindOrientaionChangeToResize:function($window){$window.on('orientationchange',function(){$window.resize();});},isAndroidWithTouchEventsBug:function(){var osVersion,isVersionWithBug;if(touchEventBugDetectionCache===undefined){osVersion=parseFloat(browserDetection.osVersion);isVersionWithBug=(osVersion>=MIN_BUGGY_ANDROID_VERSION&&osVersion<=MAX_BUGGY_ANDROID_VERSION);touchEventBugDetectionCache=(browserDetection.android&&isVersionWithBug);}
return touchEventBugDetectionCache;},bindPreventClickAndPropagation:function(els){if(!$.isArray(els)){els=[els];}
$.each(els,function(i,$el){$el.on('click',function(e){e.preventDefault();e.stopPropagation();});});},preventDefaultAndPropogationOnHammer:function(e){function preventAndStopPropagateOriginalEvent(e){e.preventDefault();e.stopPropagation();if(e.srcEvent!==undefined){e.srcEvent.preventDefault();}}
if(e!==undefined){e.preventDefault();e.stopPropagation();if(e.gesture!==undefined){if(browserDetection.msie&&(browserDetection.version==='7.0'||browserDetection.version==='8.0')){try{preventAndStopPropagateOriginalEvent(e.gesture);}catch(e){console&&console.error('Incorrect preventing propagation and prevent default '
+' in old IE inside jquery');}}else{preventAndStopPropagateOriginalEvent(e.gesture);}}}},getPositionIn3d:function(value){var vendors=['-webkit-','-ms-',''],cssValue,translateValue;value.x=value.x||0;value.y=value.y||0;value.z=value.z||0;translateValue='translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getPositionIn2d:function(value){var vendors=['-webkit-','-ms-','-o-',''],cssValue,translateValue;value.x=value.x||0;value.y=value.y||0;translateValue='translate('+value.x+'px,'+value.y+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getPositionWithJquery:function(value){var cssValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
cssValue={top:value.y+'px',left:value.x+'px'};return cssValue;},isWideDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1450px)');},isSmallDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (max-width: 1449px)');},isTabletRetina:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 800px), (min-width: 800px) and (-webkit-min-device-pixel-ratio: 1.5),(min-width: 800px) and (min-resolution: 144dpi)');},isGeneralTabletView:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 481px) and (max-width: 799px)')},isSmallDeviceWidth:function(){return!Modernizr.mq('all and (min-width: 650px) and (min-device-height: 650px) and (min-device-width: 650px)');},isMobileView:function(){return browserDetection.mobile&&Modernizr.mq('all and (max-width: 481px)');},isDesktopOver1100:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1100px)');},isDeviceUnder1100:function(){return Modernizr.mq('all and (max-width: 1099px)');},isDesktopUnder1100:function(){return!browserDetection.mobile&&CSSUtils.isDeviceUnder1100();}};return CSSUtils;})(jQuery,BROWSER_DETECTION_MODULE);$(function(){var isMobileView=false;isOldIE=($.browser.msie&&$.browser.version<=9);function closeAllMenus(){$('.global-nav_item__open').removeClass('global-nav_item__open');$('.global-submenu__open').removeClass('global-submenu__open');$('body').off('.globalmenuclear');}
if(!isOldIE){$(window).on('resize',function(){var styleDetect=$('.js-mediaquery-detect').css('overflow');if(isMobileView&&styleDetect==='visible'){isMobileView=false;closeAllMenus();}else if(!isMobileView&&styleDetect==='hidden'){isMobileView=true;closeAllMenus();}});$(window).trigger('resize');}
$('.global-nav_link').each(function(i,item){$(item).on('click',function(e){var selector='.js-global-nav-link-'+$(item).data('link');openedClass='global-submenu__open',$submenu=$('.js-global-submenu'+selector);e.stopPropagation();if(!$submenu.hasClass(openedClass)){closeAllMenus();$('body').on('click.globalmenuclear touchstart.globalmenuclear',function(e){if($(e.target).parents().index($('.global-navigation'))===-1){closeAllMenus();}});}
if(!isMobileView){var attr=$submenu.data('positionAttribute')||'left';if(attr==='left'){$submenu.css('right','auto');$submenu.css(attr,($(this).parent('li').position()[attr]||0)+'px');}}
$submenu.toggleClass(openedClass);$(item).parent().toggleClass('global-nav_item__open');if($submenu.length!==0){return false;}});});$('.global-submenu_link').each(function(i,item){$(item).on('click',function(){var $submenu=$('.global-submenu_item:eq('+i+')');if($submenu.find('ul').length>0){if(!$submenu.hasClass('global-submenu_item__open')){$('.global-submenu_item').removeClass('global-submenu_item__open');}
$submenu.toggleClass('global-submenu_item__open');if($(this).offset().top<$(window).scrollTop()){$(window).scrollTop($(item).offset().top);}
return false;}});});});(function($){var ANDROID_BODY_CLASS='os-android',IOS_BODY_CLASS='os-ios',NO_ANDROID_CLASS='no-os-android',NO_IOS_CLASS='no-os-ios';var isAndroid=$.browser.android,isIos=$.browser.ios;$(function(){$('body').addClass(isAndroid?ANDROID_BODY_CLASS:NO_ANDROID_CLASS).addClass(isIos?IOS_BODY_CLASS:NO_IOS_CLASS);});})(jQuery);$(function(){'use strict';var $regionSwitcher=$('.js-region-change-inner'),$region=$('.js-region'),$hamburgerRegionSwitcher=$('.js-menu_link'),$regionChange=$('.js-menu_item__region-change'),$subMenu=$('.js-submenu'),$subMenuLink=$('.js-submenu_link');$regionSwitcher.on('click',function(e){e.preventDefault();$regionSwitcher.toggleClass($regionSwitcher.data('openedClass'));$region.toggleClass($region.data('openedClass'));if($region.hasClass($region.data('openedClass'))){$('html, body').animate({scrollTop:$(document).outerHeight()},500);}});$hamburgerRegionSwitcher.on('click',function(e){e.preventDefault();$regionChange.toggleClass($regionChange.data('openedClass'));$subMenu.toggle();});$subMenuLink.on('click',function(e){e.preventDefault();var $this=$(this),$languagesList=$('.js-submenu-second',$this.parent());$this.toggleClass($this.data('openedClass'));$languagesList.toggle();})});

}
/*
     FILE ARCHIVED ON 11:10:22 Nov 09, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 14:20:57 Nov 04, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 390.612
  exclusion.robots: 0.124
  exclusion.robots.policy: 0.114
  RedisCDXSource: 110.15
  esindex: 0.01
  LoadShardBlock: 260.158 (3)
  PetaboxLoader3.datanode: 264.852 (4)
  CDXLines.iter: 17.545 (3)
  load_resource: 154.373
  PetaboxLoader3.resolve: 111.369
*/